<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>DevPM —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏</title>
    <style>
    #source { width:50px; height:50px; background-color: red; display: inline-block;}
    #target1 {width: 200px; height: 150px; overflow: hidden; border: #0f0 3px solid; margin: 10px 0; padding: 10px; background: #f0f8ff;}
    #target2 {width: 200px; height: 150px; overflow: hidden; border: #00f 3px solid; margin: 10px 0; padding: 10px; background: #fff0f5;}
    div{margin:5px;}
    .label {font-weight: bold; color: #333;}
    .targetArea { display: flex }
    </style>
</head>
<body>
  <div class="label">–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ –∫—Ä–∞—Å–Ω—ã–π –∫–≤–∞–¥—Ä–∞—Ç:</div>
  <div id="source" draggable="true">Drag Me!</div>

  <div class="targetArea">
    <div>
      <div class="label">üéØ COPY (Ctrl –Ω–µ –Ω—É–∂–µ–Ω):</div>
      <div id="target1">–ó–æ–Ω–∞ –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø</div>
    </div>

    <div>
      <div class="label">‚û°Ô∏è MOVE (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ):</div>
      <div id="target2">–ó–æ–Ω–∞ –ü–ï–†–ï–ú–ï–©–ï–ù–ò–Ø</div>
    </div>
  </div>

  <script>
    let dragged = null;
    const source = document.getElementById("source");

    // ‚úÖ effectAllowed: –†–∞–∑—Ä–µ—à–∞–µ–º –í–°–ï –æ–ø–µ—Ä–∞—Ü–∏–∏
    source.addEventListener("dragstart", (e) => {
      dragged = e.target;
      e.dataTransfer.effectAllowed = 'all';  // copy, move, link ‚Äî –≤—Å–µ –º–æ–∂–Ω–æ!
      e.dataTransfer.setData('text/plain', source.id);
      console.log('effectAllowed = "all"');
      console.log(`%cdragstart:%c ${source.id}`, 'font-weight: bold; color: #2196F3;', 'font-weight: bold; color: #666;');
    });

    // üéØ –ó–û–ù–ê 1: –ö–û–ü–ò–†–û–í–ê–ù–ò–ï
    const target1 = document.getElementById("target1");
    target1.addEventListener("dragover", (e) => {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'copy';    // üìã –ö—É—Ä—Å–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è!
      console.log('COPY OK (dropEffect=copy)');
    });
    target1.addEventListener("drop", (e) => {
      e.preventDefault();
      e.target.appendChild(dragged.cloneNode(true));  // ‚úÖ –ö–û–ü–ò–Ø
      console.log('COPY –≤—ã–ø–æ–ª–Ω–µ–Ω');
      const data = e.dataTransfer.getData('text/plain');
      console.log(`%cdrop:%c ${data}`, 'font-weight: bold; color: #2196F3;', 'font-weight: bold; color: #666;');
    });

    // ‚û°Ô∏è –ó–û–ù–ê 2: –ü–ï–†–ï–ú–ï–©–ï–ù–ò–ï
    const target2 = document.getElementById("target2");
    target2.addEventListener("dragover", (e) => {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';    // ‚û°Ô∏è –ö—É—Ä—Å–æ—Ä –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è!
      console.log('MOVE OK (dropEffect=move)');
    });
    target2.addEventListener("drop", (e) => {
      e.preventDefault();
      e.target.appendChild(dragged);         // ‚úÖ –ü–ï–†–ï–ú–ï–©–ï–ù–ò–ï (–±–µ–∑ clone)
      console.log('MOVE –≤—ã–ø–æ–ª–Ω–µ–Ω');
      const data = e.dataTransfer.getData('text/plain');
      console.log(`%cdrop:%c ${data}`, 'font-weight: bold; color: #2196F3;', 'font-weight: bold; color: #666;');
    });
  </script>
</body>
</html>
