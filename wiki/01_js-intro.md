## 1. Основы JavaScript

- [1. Основы JavaScript](#1-основы-javascript)
  - [Что такое JavaScript](#что-такое-javascript)
    - [Необходимый инструментарий для разработки](#необходимый-инструментарий-для-разработки)
  - [Первая программа на JavaScript](#первая-программа-на-javascript)
  - [Выполнение кода javascript](#выполнение-кода-javascript)
    - [Основы синтаксиса javascript](#основы-синтаксиса-javascript)
    - [Блоки кода](#блоки-кода)
    - [Комментарии](#комментарии)
  - [Подключение внешнего файла JavaScript](#подключение-внешнего-файла-javascript)
    - [Асинхронная загрузка и отложенное выполнение](#асинхронная-загрузка-и-отложенное-выполнение)
  - [Консоль браузера и console.log](#консоль-браузера-и-consolelog)
    - [Вывод на консоль и console.log](#вывод-на-консоль-и-consolelog)

### Что такое JavaScript
Сегодняшний мир веб-сайтов трудно представить без языка JavaScript. JavaScript - это то, что делает живыми веб-страницы, которые мы каждый день просматриваем в своем веб-браузере.

JavaScript был создан в 1995 году в компании Netscape разработчиком Брендоном Айком (Brendon Eich) в качестве языка сценариев в браузере Netscape Navigator 2. Первоначально язык назывался LiveScript, но на волне популярности в тот момент другого языка Java LiveScript был переименован в JavaScript. Однако данный момент до сих пор иногда приводит к некоторой путанице: некоторые начинающие разработчики считают, что Java и JavaScript чуть ли не один и тот же язык. Нет, это абсолютно два разных языка, и они связаны только по названию.

Первоначально JavaScript обладал довольно небольшими возможностями. Его цель состояла лишь в том, чтобы добавить немного поведения на веб-страницу. Например, обработать нажатие кнопок на веб-странице, произвести какие-нибудь другие действия, связанные прежде всего с элементами управления.

Однако развитие веб-среды, появление HTML5 и технологии Node.js открыло перед JavaScript гораздо большие горизонты. Сейчас JavaScript продолжает использоваться прежде всего для создания веб-приложений на стороне клиента, только теперь он предоставляет гораздо больше возможностей.

Также он применяется как язык серверной стороны. То есть если раньше JavaScript применялся только на веб-странице, а на стороне сервера нам надо было использовать такие технологии, как PHP, ASP.NET, Ruby, Java, то сейчас благодаря Node.js мы можем обрабатывать все запросы к серверу также с помощью JavaScript.

Также JavaScript может применяться для создания десктопных приложений, например, благодаря таким фреймворкам как Electron.

В последнее время переживает бум сфера мобильной разработки. И JavaScript опять же не остается в стороне: увеличение мощности устройств и повсеместное распространение стандарта HTML5 привело к тому, что для создания приложений для смартфонов, планшетов и настольных компьютеров мы также можем использовать JavaScript. То есть JavaScript уже перешагнул границы веб-браузера, которые ему были очерчены при его создании.

Также javascript может использоваться для разработки программ для встроенных устройство, в частности, для направления IoT(Internet of Things или Интернет вещей). То есть JavaScript можно использовать для программирования самых различных "умных" устройств, которые взаимодействуют с интернетом.

Таким образом, вы можете встретить применение JavaScript практически повсюду. Сегодня это действительно один из самых популярных языков программирования, и его популярность еще будет расти.

С самого начала существовало несколько веб-браузеров (Netscape, Internet Explorer), которые предоставляли различные реализации языка. И чтобы свести различные реализации к общему стержню и стандартизировать язык под руководством организации ECMA был разработан стандарт ECMAScript. В принципе сами термины JavaScript и ECMAScript являются во многом взаимозаменяемыми и относятся к одному и тому же языку.

К настоящему времени ECMA было разработано несколько стандартов языка, которые отражают его развитие. В последнее время почти каждый год выходит новый стандарт. На данный момент последним принятым стандартом является ECMAScript 2023, который был издан в июне 2023 года. В последние годы новые стандарты выпускаются почти каждый год, понемногу добавляя новые возможности к языку. Однако реализация стандартов в браузерах занимает довольно продолжительное время. Одни браузеры быстрее реализуют новые стандарты, другие медленнее. Кроме того, есть большой пласт старых версий браузеров, которыми простые пользователи продолжают пользоваться и которые естественно могут не поддерживать нововведения последних стандартов. И это надо учитывать при разработке программ на JavaScript. В данном же руководстве будут рассматриваться в основном те возможности JavaScript, которые поддерживаются всеми наиболее распространенными современными браузерами.

JavaScript является интерпретируемым языком. Это значит, что код на языке JavaScript выполняется с помощью интерпретатора. Интерпретатор получает инструкции языка JavaScript, которые определены на веб-странице, выполняет их (или интерпретирует).

#### Необходимый инструментарий для разработки
Для разработки на JavaScript нам потребуется прежде всего текстовый редактор для написания кода на данном языке программирования. В качестве текстового редактора я советую использовать такую программу как [Visual Studio Code](https://code.visualstudio.com/download). Он бесплатен, имеет много возможностей, в частности, поддерживает подцветку синтаксиса JavaScript и является кроссплатформенным: может быть установлен как на Windows, так и на Linux и MacOS. Хотя этот может быть любой другой текстовый редактор.

Для проверки выполнения программы нам потребуется также интерпретатор JavaScript, который можем выполнять программы JavaScript. В качестве интерпретатора мы будем использовать стандартный веб-браузер. Можно использовать последние версии любых распространенных браузеров - Google Chrome, Microsoft Edge, Mozilla Firefox, Opera, Safari.

Также существуют различные среды разработки, которые поддерживают JavaScript и облегчают разработку на этом языке, например, Visual Studio, WebStorm, Netbeans и так далее, которые могут упростить какие-то моменты создания программ на JavaScript. При желании можно использовать также эти среды разработки. Однако в общем случае достаточно текствого редактора и веб-браузера, а в простых случаях даже достаточно одного браузера.

Итак, приступим к созданию первой программы.[^1-1]

### Первая программа на JavaScript
Создадим первую программу на javascript. Для написания и тестирования программ на JavaScript нам потребуются две вещи: текстовый редактор и веб-браузер.

В качестве текстового редактора можно взять любой, который нравится - Atom, Sublime Text, Visual Studio Code, Notepad++ и другие. В данном руководстве я буду ориентироваться на бесплатный и многофункциональный текстовый редактор [Visual Studio Code](https://code.visualstudio.com/download), поскольку он является наиболее популярным.

В качестве браузера также можно взять последние версии любого предпочтительного веб-браузера. В настоящем руководстве я буду преимущественно ориентироваться на Google Chrome.

Для начала определим для нашего приложения какой-нибудь каталог. Например, создадим на диске C папку *app*. В этой папке создадим файл под названием *index.html*. То есть данный файл будет представлять веб-страницу с кодом HTML.

![Первый скрипт на JavaScript](../img/1.12.png)

Откроем этот файл в текстовом редакторе и определим в файле следующий код:
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>METANIT.COM</title>
</head>
<body>
    <script>
        document.write("<h2>Первая программа на JavaScript</h2>");
    </script>
</body>
</html>
```

Здесь мы определяем стандартные элементы `html`. В элементе `head` определяется кодировка utf-8 и заголовок (элемент `title`). В элементе `body` определяется тело веб-страницы, которое в данном случае состоит только из одного элемента `<script>`.

Подключение кода javascript на html-страницу осуществляется с помощью тега `<script>`. Данный тег следует размещать либо в заголовке (между тегами `<head>` и `</head>`), либо в теле веб-странице (между тегами `<body>` и `</body>`). Нередко подключение скриптов происходит перед закрывающим тегом `</body>` для оптимизации загрузки веб-страницы.

Раньше надо было в теге `<script>` указывать тип скрипта, так как данный тег может использоваться не только для подключения инструкций javascript, но и для других целей. Так, даже сейчас вы можете встретить на некоторых веб-страницах такое определение элемента `script`:
```html
<script type="text/javascript">
```

Но в настоящее время предпочтительнее опускать атрибут `type`, так как браузеры по умолчанию считают, что элемент `script` содержит инструкции `javascript`.

Используемый нами код javascript содержит одно выражение:
```js
document.write("<h2>Первая программа на JavaScript</h2>");
```

Код javascript может содержать множество инструкций и каждая инструкция завершается точкой с запятой. Наша инструкция вызывает метод `document.write()`, который выводит на веб-страницу некоторое содержимое, в данном случае это заголовок `<h2>Первая программа на JavaScript</h2>`.

Вид файла в текстовом редакторе Visual Studio Code:

![Первая программа на JavaScript в Visual Studio Code](../img/1.2.png)

Теперь, когда веб-страница готова, откроем ее в веб-браузере.

![Первая программа на JavaScript](../img/1.1.png)

И веб-браузер отобразит заголовок, который мы передали в метод `document.write()` в коде javascript.

### Выполнение кода javascript
Когда браузер получает веб-страницу с кодом html и javascript, то он ее интерпретирует. Результат интерпретации в виде различных элементов — кнопок, полей ввода, текстовых блоков и т.д., мы видим перед собой в браузере. Интерпретация веб-страницы происходит последовательно сверху вниз.

Когда браузер встречает на веб-странице элемент `<script>` с кодом javascript, то вступает в действие встроенный интерпретатор javascript. И пока он не закончит свою работу, дальше интерпретация веб-страницы не идет.

Рассмотрим небольшой пример и для этого определим файл *index.html* со следующим кодом:
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>METANIT.COM</title>
    <script>
        document.write("Начальный текст");
    </script>
</head>
<body>
    <h2>Первый заголовок</h2>
    <script>
        document.write("Первый текст");
    </script>
    <h2>Второй заголовок</h2>
    <script>
        document.write("Второй текст");
    </script>
</body>
</html>
```

Здесь три вставки кода javascript — один в секции `<head>` и по одному после каждого заголовка.

Откроем веб-страницу в браузере и мы увидим, что браузер последовательно выполняет код веб-страницы:

![Интерпретация кода JavaScript](../img/1.4.png)

Здесь мы видим, что вначале выполняется код javascript из секции `head`, который выводит на веб-страницу некоторый текст:
```js
document.write("Начальный текст");
```

Далее выводится первый стандартный html-элемент `<h2>`:
```html
<h2>Первый заголовок</h2>
```

После этого выполняется вторая вставка кода на javascript:
```js
document.write("Первый текст");
```

Затем выводится второй html-элемент `<h2>`:
```html
<h2>Второй заголовок</h2>
```

И в конце выполняется последняя вставка кода на javascript:
```js
document.write("Второй текст");
```

После этого браузер закончит интерпретацию веб-страницы, и веб-страница окажется полностью загружена. Данный момент очень важен, поскольку может влиять на производительность. Поэтому нередко вставки кода javascript идут перед закрывающим тегом `</body>`, когда основная часть веб-страницы уже загружена в браузере.

#### Основы синтаксиса javascript
Прежде чем переходить к детальному изучению основ языка программирования javascript, рассмотрим некоторые базовые моменты его синтаксиса.

Код javascript состоит из инструкций. Каждая инструкция представляет некоторое действие. И для отделения инструкций друг от друга в javascript после инструкции ставится точка с запятой:
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>METANIT.COM</title>
</head>
<body>
    <script>
        document.write("2 + 5 =  "); const sum = 2 + 5; document.write(sum);
    </script>
</body>
</html>
```

Здесь в коде javascript определены три инструкции:

1. `document.write("2 + 5 =  ")`

    Выводит на страницу текст "2 + 5 = "

2. `const sum = 2 + 5;`

    С помощью оператора `const` определяет константу `sum` — некоторое значение, которое не должно меняться (так как в данном случае мы присваиваем ему значение только один раз и больше не изменяем). И эта константа равна сумме 2 + 5

3. `document.write(sum);`

    Выводит на страницу значение константы `sum` (то есть суму 2 + 5)

    ![Инструкции в JavaScript](../img/1.5.png)

Однако современные браузеры вполне могут различать отдельные инструкции, если они просто располагаются на отдельных строках без точки запятой:
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>METANIT.COM</title>
</head>
<body>
    <script>
        document.write("2 + 5 =  ")
        const sum = 2 + 5
        document.write(sum)
    </script>
</body>
</html>
```

Но чтобы улучшить читабельность кода и снизить число возможных ошибок, рекомендуется определять каждую инструкцию javascript на отдельной строчке и завершать ее точкой с запятой, как в первом варианте.

#### Блоки кода
Отдельные инструкции можно можно объединять в блоки кода, которые представляют некоторый код, заключенные между фигурными скобками `{ блок кода }`. Например, определим следующую страницу:
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>METANIT.COM</title>
</head>
<body>
    <script>
        document.write("Привет! ");
        {
            document.write("Как дела? ");
            document.write("Че не отвечаешь, ты че спишь? ");
        }
        document.write("Ну пока...");
    </script>
</body>
</html>
```

Здесь программа на JavaScript состоит из 4-х инструкций. Причем две из инструкций помещены в блок кода:
```js
{
    document.write("Как дела? ");
    document.write("Че не отвечаешь, ты че спишь? ");
}
```

Одна инструкция выполняется до блока кода, и еще одна — после блока кода.

#### Комментарии
В коде javascript могут использоваться комментарии. Комментарии не обрабатываются интерпретатором javascript и никак не учитываются в работе программы. Они предназначены для ориентации по коду, чтобы указать, что делает тот или иной код.

Комментарии могут быть однострочными, для которых используется двойной слеш:
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>METANIT.COM</title>
</head>
<body>
    <script>
        // выводим сообщение
        document.write("2 + 5 =  ")
        // объявляем константу и присваиваем ей сумму чисел 2 и 5
        const sum = 2 + 5
        // выводим значение константы sum
        document.write(sum)
    </script>
</body>
</html>
```

Кроме однострочных комментариев могут использоваться и многострочные. Такие комментарии заключаются между символами `/*текст комментария*/`. Например:
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>METANIT.COM</title>
</head>
<body>
    <script>
        /*  Пример арифметической операции
        и определения константы
        в коде JavaScript */
        document.write("2 + 5 =  ")
        const sum = 2 + 5
        document.write(sum)
    </script>
</body>
</html>
```

### Подключение внешнего файла JavaScript
В прошлой статье код javascript непосредственно определялся на веб-странице. Но есть еще один способ подключения кода JavaScript, который представляет вынесение кода во внешние файлы и их подключение с помощью тега `<script>`.

Итак, в прошлой теме мы создали html-страницу *index.html*, которая находится в каталоге app. Теперь создадим в этом каталоге новый подкаталог. Назовем его *js*. Он будет предназначен для хранения файлов с кодом javascript. В этом подкаталоге создадим новый текстовый файл, который назовем *main.js*. Файлы с кодом javascript имеют расширение *.js*. То есть у нас получится следующая структура проекта в папке *app*:

![Структура программы на JavaScript](../img/1.3.png)

Откроем файл *main.js* в текстовом редакторе и определим в нем следующий код:
```js
document.body.innerHTML = "<h2>Первая программа на JavaScript</h2>"; // выводим заголовок
document.body.innerHTML += "Привет мир!";                             // выводим обычный текст
```

Здесь для добавления на веб-страницу некоторого содержимого применяется свойство `document.body.innerHTML`. Это свойство включает три компонента:

- **`document`**: представляет текущий документ HTML (грубо говоря, текущий файл html)

- **`body`**: представляет элемент `body` — основное содержимое текущего документа HTML, которое собственно мы и видим на веб-странице в браузере

- **`innerHTML`**: представляет код HTML элемента `body`

То есть свойство `document.body.innerHTML` фактически означает, что мы обращаемся к коду `html` элемента `body` на текущей html-странице. Но что мы с ним делаем? Возьмем первую строку
```js
document.body.innerHTML = "<h2>Первая программа на JavaScript</h2>";
```

Здесь мы передаем во внутренне содержимое элемента `body` заголовок `<h2>`.

Далее на второй строке мы добавляем к содержимому элемента `body` простой текст.

```js
document.body.innerHTML += "Привет мир!";
```

Для совместимости с кодировкой страницы *index.html* для файла с кодом javascript также желательно устанавливать кодировку utf-8. При работе в Visual Studio Code этот редактор автоматически устанавливает кодировку UTF-8.

Теперь подключим этот файл на веб-страницу *index.html*:
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>METANIT.COM</title>
</head>
<body>
    <script src="js/main.js"></script>
</body>
</html>
```

Чтобы подключить файл с кодом javascript на веб-страницу, применяется также тег **`<script>`**, у которого устанавливается атрибут **`src`**. Этот атрибут указывает на путь к файлу скрипта. В нашем случае используется относительный путь. Так как веб-страница находится в одной папке с каталогом *js*, то в качестве пути мы можем написать *js/main.js*.

Также надо учитывать, что за открывающим тегом `script` должен обязательно следовать закрывающий `</script>`

И после открытия файла *index.html* в браузере отобразится сообщение:

![Подключение внешних скриптов javascript](../img/1.7.png)

В отличие от определения кода javascript вынесение его во внешние файлы имеет ряд преимуществ:

- Мы можем повторно использовать один и тот же код на нескольких веб-страницах

- Внешние файлы javascript бразуер может кэшировать, за счет этого при следующем обращении к странице браузер снижает нагрузка на сервер, а браузеру надо загрузить меньший объем информации

- Код веб-страницы становится "чище". Он содержит только html-разметку, а код поведения хранится во внешних файлах. В итоге можно отделить работу по созданию кода html-страницы от написания кода javascript

Поэтому, как правило, предпочтительнее использовать код javascript во внешних файлах, а не в прямых вставках на веб-страницу с помощью элемента script.

#### Асинхронная загрузка и отложенное выполнение
Нередко веб-страницы имеют сложную структуру, какие-то блоки на html-странице, где подключаются файлы javascript, формируются динамически, что может усложнять управление файлами javascript. И для управления загрузкой файла с кодом JavaScript браузер предоставляет два атрибута: **`async`** и **`defer`**.

Атрибут **`async`** гарантирует, что обработка HTML-кода не будет приостановлена, когда браузер встретит элемент `<script>`. Файл JavaScript загружается асинхронно (отсюда и название атрибута — `async`). В этом случае HTML-код продолжает обрабатываться до тех пор, пока не будет загружен соответствующий файл JavaScript. Когда будет загружен файл JavaScript, обработка HTML останавливается, и начинает выполняться загруженный файл JS. После выполнения кода JavaScript продолжается обработка HTML.

![Асинхронная загрузка файла JavaScript и атрибут async](../img/1.14.png)

Пример применения атрибута **`async`**:
```html
<script async src="js/main.js"></script>
```

Атрибут **`defer`** также гарантирует, что обработка HTML-кода не будет приостановлена. С другой стороны, исходный код JavaScript выполняется только после полной обработки HTML-кода. Таким образом, выполнение кода JavaScript откладывается (отсюда и название — `defer` в переводе на английский).[^1-4]

![Отложенное выполенние файла JavaScript и атрибут defer](../img/1.15.png)

Пример применения атрибута `defer`:
```js
<script defer src="js/main.js"></script>
```

### Консоль браузера и console.log
Незаменимым инструментом при работе с JavaScript является консоль браузера, которая позволяет производить отладку программы. Во многих современных браузерах есть подобная консоль. Например, чтобы открыть консоль в Google Chrome, нам надо перейти в меню **Дополнительные инструменты** (**More Tools**) -> **Инструменты разработчика** (**Developer tools**):

![Отладка JavaScript в Google Chrome](../img/1.8.png)

После этого внизу браузера откроется консоль:

![Консоль JavaScript в Google Chrome](../img/1.9.png)

Мы можем напрямую вводить в консоль браузера выражения JavaScript, и они будут выполняться. Например, введем в консоли следующий текст:
```js
alert("Привет мир");
```

И что замечательно при работе с консолью, при вводе она предлагает всплывающую подсказку с названиями, которые мы хотим ввести, что упрощает ввод, снижает количество возможных ошибок:

![Консоль JavaScript в Google Chrome](../img/1.13.png)

Функция **`alert()`** выводит в браузере окно с сообщением. В итоге после ввода этой команды и нажатия на клавишу <kbd>Enter</kbd> браузер выполнит эту функцию и отобразит нам окно с сообщением:

![Ввод команд JavaScript в консоли браузера Google Chrome](../img/1.10.png)

Таким образом, для написания и выполнения кода JavaScript нам в принципе не нужен ни текстовый редактор, ни файл веб-страницы, который содержит код javascript, достаточно одной консоли браузера. Однако набирать большой и сложный код JavaScript в консоли может быть не очень удобно, поэтому в дальнейшем для всех примеров по прежнему будет использовать код JavaScript, который встраивается на html-страницу.

#### Вывод на консоль и console.log
Для вывода различного рода информации в консоли браузера используется специальная функция **`console.log()`**. Например, определим html-страницу со следующим кодом:
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" >
    <title>METANIT.COM</title>
</head>
<body>
    <script>
        const sum = 5 + 8;
        console.log("Результат операции: ");
        console.log(sum);
    </script>
</body>
</html>
```

В коде javascript с помощью ключевого слова **`const`** объявляется константа `sum`, которой присваивается сумма двух чисел 5 и 8:
```js
const sum = 5 + 8;
```

Далее с помощью метода `console.log()` на консоль браузера выводится некоторое сообщение
```js
console.log("Результат операции");
```

И в конце также с помощью метода `console.log()` на консоль браузера выводится значение константы `sum`.

```js
console.log(sum);
```

И после запуска веб-страницы в браузере мы увидим в консоли результат выполнения кода:

![Функция console.log() в JavaScript](../img/1.11.png)

Что очень полезно, в консоли браузера вы также можете заметить номера строк кода, где именно выполнялся вывод на консоль.

В дальнейшем мы часто будем обращаться к консоли и использовать функцию `console.log`.

Причем подобный код мы могли бы ввести в самой консоли:

![Консоль JavaScript в браузере](../img/1.6.png)

Также последовательно вводим инструкции и после ввода каждой инструкции нажимаем на <kbd>Enter</kbd>. В данном случае я ввел две инструкции:
```js
const sum2 = 1 + 2      // определяем константу sum2, которая равна сумме 1 + 2
console.log(sum2)       // выводим значение константы sum2 на консоль
```

Если нам надо, чтобы код в консоли переносился на новую строку без выполнения, то в конце выражения javascript нажимаем на комбинацию клавиш <kbd>Shift</kbd> + <kbd>Enter</kbd>. После ввода последней инструкции для выполнения введенного кода javascript нажимаем на <kbd>Enter</kbd>.[^1-5]

[^1-1]: [Введение в JavaScript](https://metanit.com/web/javascript/1.1.php)
[^1-2]: [Первая программа на JavaScript](https://metanit.com/web/javascript/1.2.php)
[^1-3]: [Выполнение кода javascript](https://metanit.com/web/javascript/1.3.php)
[^1-4]: [Подключение внешнего файла JavaScript](https://metanit.com/web/javascript/1.4.php)
[^1-5]: [Консоль браузера и console.log](https://metanit.com/web/javascript/1.5.php)
