## –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤

- [–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤](#–∑–∞–≥—Ä—É–∑–∫–∞-–¥–æ–∫—É–º–µ–Ω—Ç–∞-–∏-—Ä–µ—Å—É—Ä—Å–æ–≤)
  - [–°—Ç—Ä–∞–Ω–∏—Ü–∞: DOMContentLoaded, load, beforeunload, unload](#—Å—Ç—Ä–∞–Ω–∏—Ü–∞-domcontentloaded-load-beforeunload-unload)
    - [DOMContentLoaded](#domcontentloaded)
      - [DOMContentLoaded –∏ —Å–∫—Ä–∏–ø—Ç—ã](#domcontentloaded-–∏-—Å–∫—Ä–∏–ø—Ç—ã)
      - [DOMContentLoaded –∏ —Å—Ç–∏–ª–∏](#domcontentloaded-–∏-—Å—Ç–∏–ª–∏)
      - [–í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤ –±—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ](#–≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ-–≤-–±—Ä–∞—É–∑–µ—Ä-–∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ)
    - [window.onload](#windowonload)
    - [window.onunload](#windowonunload)
    - [window.onbeforeunload](#windowonbeforeunload)
    - [readyState](#readystate)
    - [–ò—Ç–æ–≥–æ](#–∏—Ç–æ–≥–æ)
  - [–°–∫—Ä–∏–ø—Ç—ã: async, defer](#—Å–∫—Ä–∏–ø—Ç—ã-async-defer)
    - [defer](#defer)
    - [async](#async)
    - [–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã](#–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏-–∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ-—Å–∫—Ä–∏–ø—Ç—ã)
    - [–ò—Ç–æ–≥–æ](#–∏—Ç–æ–≥–æ-1)
  - [–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤: onload –∏ onerror](#–∑–∞–≥—Ä—É–∑–∫–∞-—Ä–µ—Å—É—Ä—Å–æ–≤-onload-–∏-onerror)
    - [–ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤](#–∑–∞–≥—Ä—É–∑–∫–∞-—Å–∫—Ä–∏–ø—Ç–æ–≤)
      - [script.onload](#scriptonload)
      - [script.onerror](#scriptonerror)
    - [–î—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã](#–¥—Ä—É–≥–∏–µ-—Ä–µ—Å—É—Ä—Å—ã)
    - [–û—à–∏–±–∫–∞ –≤ —Å–∫—Ä–∏–ø—Ç–µ —Å –¥—Ä—É–≥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞](#–æ—à–∏–±–∫–∞-–≤-—Å–∫—Ä–∏–ø—Ç–µ-—Å-–¥—Ä—É–≥–æ–≥–æ-–∏—Å—Ç–æ—á–Ω–∏–∫–∞)
    - [–ò—Ç–æ–≥–æ](#–∏—Ç–æ–≥–æ-2)
    - [–ó–∞–¥–∞—á–∏](#–∑–∞–¥–∞—á–∏)
      - [–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∫–æ–ª–±—ç–∫–æ–º](#–∑–∞–≥—Ä—É–∑–∏—Ç–µ-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è-—Å-–∫–æ–ª–±—ç–∫–æ–º)
  - [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è-—Ä–∞–±–æ—Ç–∞-–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è-–∑–∞–≥—Ä—É–∑–∫–∞-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
    - [–ó–∞–¥–∞–Ω–∏–µ](#–∑–∞–¥–∞–Ω–∏–µ)
  - [–ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)
  - [–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏](#–∏—Å—Ç–æ—á–Ω–∏–∫–∏-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)

### –°—Ç—Ä–∞–Ω–∏—Ü–∞: DOMContentLoaded, load, beforeunload, unload
–£ –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã –µ—Å—Ç—å —Ç—Ä–∏ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è:

- `DOMContentLoaded` ‚Äì –±—Ä–∞—É–∑–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∏–ª HTML, –±—ã–ª–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ DOM-–¥–µ—Ä–µ–≤–æ, –Ω–æ –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ –∫–∞—Ä—Ç–∏–Ω–∫–∏ `<img>` –∏ —Å—Ç–∏–ª–∏, –º–æ–≥—É—Ç –±—ã—Ç—å –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.
- `load` ‚Äì –±—Ä–∞—É–∑–µ—Ä –∑–∞–≥—Ä—É–∑–∏–ª HTML –∏ –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã (–∫–∞—Ä—Ç–∏–Ω–∫–∏, —Å—Ç–∏–ª–∏ –∏ —Ç.–¥.).
- `beforeunload`/`unload` ‚Äì –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–¥–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É.

–ö–∞–∂–¥–æ–µ –∏–∑ —ç—Ç–∏—Ö —Å–æ–±—ã—Ç–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ:

- –°–æ–±—ã—Ç–∏–µ `DOMContentLoaded` ‚Äì DOM –≥–æ—Ç–æ–≤, —Ç–∞–∫ —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç –∏—Å–∫–∞—Ç—å DOM-—É–∑–ª—ã –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.
- –°–æ–±—ã—Ç–∏–µ `load` ‚Äì –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã –±—ã–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, —Å—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã, —Ä–∞–∑–º–µ—Ä—ã –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏–∑–≤–µ—Å—Ç–Ω—ã –∏ —Ç.–¥.
- –°–æ–±—ã—Ç–∏–µ `beforeunload` ‚Äì –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–¥–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É. –ú—ã –º–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–æ—Ö—Ä–∞–Ω–∏–ª –ª–∏ –æ–Ω –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Å–ø—Ä–æ—Å–∏—Ç—å, –Ω–∞ —Å–∞–º–æ–º –ª–∏ –¥–µ–ª–µ –æ–Ω —Ö–æ—á–µ—Ç —É–π—Ç–∏.
- –°–æ–±—ã—Ç–∏–µ `unload` ‚Äì –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ—á—Ç–∏ —É—à—ë–ª, –Ω–æ –º—ã –≤—Å—ë –µ—â—ë –º–æ–∂–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —ç—Ç–∏ —Å–æ–±—ã—Ç–∏—è –ø–æ–¥—Ä–æ–±–Ω–µ–µ.[^onload-ondomcontentloaded]

#### DOMContentLoaded
–°–æ–±—ã—Ç–∏–µ `DOMContentLoaded` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –æ–±—ä–µ–∫—Ç–µ `document`.

–ú—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `addEventListener`, —á—Ç–æ–±—ã –ø–æ–π–º–∞—Ç—å –µ–≥–æ:
```js
document.addEventListener("DOMContentLoaded", ready);
// –Ω–µ "document.onDOMContentLoaded = ..."
```

–ù–∞–ø—Ä–∏–º–µ—Ä:
```html
<script>
  function ready() {
    alert('DOM –≥–æ—Ç–æ–≤');

    // –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –µ—â—ë –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ (–µ—Å–ª–∏ –Ω–µ –±—ã–ª–æ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω–æ), —Ç–∞–∫ —á—Ç–æ —Ä–∞–∑–º–µ—Ä –±—É–¥–µ—Ç 0x0
    alert(`–†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: ${img.offsetWidth}x${img.offsetHeight}`);
  }

  document.addEventListener("DOMContentLoaded", ready);
</script>

<img id="img" src="https://en.js.cx/clipart/train.gif?speed=1&cache=0">
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `DOMContentLoaded` –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è, –∫–æ–≥–¥–∞ –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è, —Ç–∞–∫ —á—Ç–æ –æ–Ω —É–≤–∏–¥–∏—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –≤–∫–ª—é—á–∞—è —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã–π –Ω–∏–∂–µ `<img>`.

–ù–æ –æ–Ω –Ω–µ –¥–æ–∂–∏–¥–∞–µ—Ç—Å—è, –ø–æ–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ü–æ—ç—Ç–æ–º—É `alert` –ø–æ–∫–∞–∂–µ—Ç –Ω—É–ª–µ–≤–æ–π —Ä–∞–∑–º–µ—Ä.

–ù–∞ –ø–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥ —Å–æ–±—ã—Ç–∏–µ `DOMContentLoaded` –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–µ. DOM-–¥–µ—Ä–µ–≤–æ –≥–æ—Ç–æ–≤–æ ‚Äì –ø–æ–ª—É—á–∞–µ–º —Å–æ–±—ã—Ç–∏–µ. –•–æ—Ç—è —Ç—É—Ç –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π.

##### DOMContentLoaded –∏ —Å–∫—Ä–∏–ø—Ç—ã
–ö–æ–≥–¥–∞ –±—Ä–∞—É–∑–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HTML-–¥–æ–∫—É–º–µ–Ω—Ç –∏ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç —Ç–µ–≥ `<script>`, –æ–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å—Ç—Ä–æ–∏—Ç—å DOM. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –∑–∞—Ö–æ—á–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å DOM –∏–ª–∏ –¥–∞–∂–µ –¥–æ–ø–∏—Å–∞—Ç—å –≤ –Ω–µ–≥–æ (`document.write`), —Ç–∞–∫ —á—Ç–æ `DOMContentLoaded` –¥–æ–ª–∂–µ–Ω –ø–æ–¥–æ–∂–¥–∞—Ç—å.

–ü–æ—ç—Ç–æ–º—É `DOMContentLoaded` –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ —Å–ª—É—á–∏—Ç—Å—è –ø–æ—Å–ª–µ —Ç–∞–∫–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤:
```html
<script>
  document.addEventListener("DOMContentLoaded", () => {
    alert("DOM –≥–æ—Ç–æ–≤!");
  });
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.3.0/lodash.js"></script>

<script>
  alert("–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω");
</script>
```

–í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ –º—ã —Å–Ω–∞—á–∞–ª–∞ —É–≤–∏–¥–∏–º ¬´–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞‚Ä¶¬ª, –∞ –∑–∞—Ç–µ–º ¬´DOM –≥–æ—Ç–æ–≤!¬ª (–≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã).

!!! warning "–°–∫—Ä–∏–ø—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç DOMContentLoaded"
    –ï—Å—Ç—å –¥–≤–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ —ç—Ç–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞:

    1. –°–∫—Ä–∏–ø—Ç—ã —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º `async`, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ–º–Ω–æ–≥–æ –ø–æ–∑–∂–µ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç DOMContentLoaded.
    2. –°–∫—Ä–∏–ø—Ç—ã, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `document.createElement('script')` –∏ –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, —Ç–∞–∫–∂–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ.

##### DOMContentLoaded –∏ —Å—Ç–∏–ª–∏
–í–Ω–µ—à–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å—Ç–∏–ª–µ–π –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç DOM, –ø–æ—ç—Ç–æ–º—É `DOMContentLoaded` –∏—Ö –Ω–µ –∂–¥—ë—Ç.

–ù–æ –∑–¥–µ—Å—å –µ—Å—Ç—å –ø–æ–¥–≤–æ–¥–Ω—ã–π –∫–∞–º–µ–Ω—å. –ï—Å–ª–∏ –ø–æ—Å–ª–µ —Å—Ç–∏–ª–µ–π —É –Ω–∞—Å –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç, —Ç–æ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –¥–æ–∂–¥–∞—Ç—å—Å—è, –ø–æ–∫–∞ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è —Å—Ç–∏–ª–∏:
```html
<link type="text/css" rel="stylesheet" href="style.css">
<script>
  // —Å–∫—Ä–∏–ø—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø–æ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è —Å—Ç–∏–ª–∏
  alert(getComputedStyle(document.body).marginTop);
</script>
```

–ü—Ä–∏—á–∏–Ω–∞ –≤ —Ç–æ–º, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç—É –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –ø–æ–ª—É—á–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∑–∞–≤–∏—Å—è—â–∏—Ö –æ—Ç —Å—Ç–∏–ª–µ–π, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ. –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –æ–Ω –¥–æ–ª–∂–µ–Ω –¥–æ–∂–¥–∞—Ç—å—Å—è, –ø–æ–∫–∞ —Å—Ç–∏–ª–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è.

–¢–∞–∫ –∫–∞–∫ `DOMContentLoaded` –¥–æ–∂–∏–¥–∞–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–≤, —Ç–æ —Ç–µ–ø–µ—Ä—å –æ–Ω —Ç–∞–∫ –∂–µ –¥–æ–∂–∏–¥–∞–µ—Ç—Å—è –∏ —Å—Ç–∏–ª–µ–π –ø–µ—Ä–µ–¥ –Ω–∏–º–∏.

##### –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤ –±—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ
Firefox, Chrome –∏ Opera –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç –ø–æ–ª—è –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–∏ `DOMContentLoaded`.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –µ—Å—Ç—å —Ñ–æ—Ä–º–∞ –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è –∏ –±—Ä–∞—É–∑–µ—Ä –∑–∞–ø–æ–º–Ω–∏–ª –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–æ –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–∏ `DOMContentLoaded` –æ–Ω –ø–æ–ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∏—Ö (–µ—Å–ª–∏ –ø–æ–ª—É—á–∏–ª —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

–¢–∞–∫ —á—Ç–æ, –µ—Å–ª–∏ `DOMContentLoaded` –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –∏–∑-–∑–∞ –¥–æ–ª–≥–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å ‚Äì –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ. –í—ã –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –∑–∞–º–µ—á–∞–ª–∏, —á—Ç–æ –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∞–π—Ç–∞—Ö (–µ—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ) –ø–æ–ª—è –ª–æ–≥–∏–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è –Ω–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, –µ—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–æ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –≠—Ç–æ –∏ –µ—Å—Ç—å –æ–∂–∏–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è `DOMContentLoaded`.

#### window.onload
–°–æ–±—ã—Ç–∏–µ `load` –Ω–∞ –æ–±—ä–µ–∫—Ç–µ `window` –Ω–∞—Å—Ç—É–ø–∞–µ—Ç, –∫–æ–≥–¥–∞ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å –≤—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –≤–∫–ª—é—á–∞—è —Å—Ç–∏–ª–∏, –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏ –¥—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã. –≠—Ç–æ —Å–æ–±—ã—Ç–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ —Å–≤–æ–π—Å—Ç–≤–æ `onload`.

–í –ø—Ä–∏–º–µ—Ä–µ –Ω–∏–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–∫–∞–∑–∞–Ω—ã —Ä–∞–∑–º–µ—Ä—ã –∫–∞—Ä—Ç–∏–Ω–∫–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ `window.onload` –¥–æ–∂–∏–¥–∞–µ—Ç—Å—è –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
```html
<script>
  window.onload = function() { // –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å window.addEventListener('load', (event) => {
    alert('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');

    // –∫ —ç—Ç–æ–º—É –º–æ–º–µ–Ω—Ç—É –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
    alert(`Image size: ${img.offsetWidth}x${img.offsetHeight}`);
  };
</script>

<img id="img" src="https://en.js.cx/clipart/train.gif?speed=1&cache=0">
```

#### window.onunload
–ö–æ–≥–¥–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å –ø–æ–∫–∏–¥–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–∞ –æ–±—ä–µ–∫—Ç–µ `window` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `unload`. –í —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç —Å—Ç–æ–∏—Ç —Å–æ–≤–µ—Ä—à–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, –Ω–µ —Ç—Ä–µ–±—É—é—â–∏–µ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –≤—Ä–æ–¥–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –≤—Å–ø–ª—ã–≤–∞—é—â–∏—Ö –æ–∫–æ–Ω.

–û–±—ã—á–Ω–æ –∑–¥–µ—Å—å –æ—Ç—Å—ã–ª–∞—é—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –º—ã —Å–æ–±—Ä–∞–ª–∏ –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–º, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: –∫–ª–∏–∫–∏, –ø—Ä–æ–∫—Ä—É—Ç–∫–∞, –ø—Ä–æ—Å–º–æ—Ç—Ä—ã –æ–±–ª–∞—Å—Ç–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ.

–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, —Å–æ–±—ã—Ç–∏–µ `unload` ‚Äì —ç—Ç–æ —Ç–æ—Ç –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—Å –ø–æ–∫–∏–¥–∞–µ—Ç –∏ –º—ã —Ö–æ—Ç–∏–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ.

–î–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `navigator.sendBeacon(url, data)`, –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ https://w3c.github.io/beacon/.

–û–Ω –ø–æ—Å—ã–ª–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ–Ω–µ. –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥—Ä—É–≥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –Ω–µ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è: –±—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∏–¥–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç `sendBeacon`.

–ï–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ—Ç —Ç–∞–∫:
```js
let analyticsData = { /* –æ–±—ä–µ–∫—Ç —Å —Å–æ–±—Ä–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ */ };

window.addEventListener("unload", function() {
  navigator.sendBeacon("/analytics", JSON.stringify(analyticsData));
});
```

- –û—Ç—Å—ã–ª–∞–µ—Ç—Å—è POST-–∑–∞–ø—Ä–æ—Å.
- –ú—ã –º–æ–∂–µ–º –ø–æ—Å–ª–∞—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫—É, –Ω–æ —Ç–∞–∫ –∂–µ —Ñ–æ—Ä–º—ã –∏ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã, –∫–∞–∫ –ø–∏—Å–∞–Ω–æ –≤ —Å–ª—É—á–∞–µ —Å  `fetch`, –Ω–æ –æ–±—ã—á–Ω–æ —ç—Ç–æ —Å—Ç—Ä–æ–∫–æ–≤—ã–π –æ–±—ä–µ–∫—Ç.
- –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 64 –ö–±.

–ö —Ç–æ–º—É –º–æ–º–µ–Ω—Ç—É, –∫–∞–∫ `sendBeacon` –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è, –±—Ä–∞—É–∑–µ—Ä –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ —É–∂–µ –ø–æ–∫–∏–Ω–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É, —Ç–∞–∫ —á—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ –±—É–¥–µ—Ç (–¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–Ω –æ–±—ã—á–Ω–æ –ø—É—Å—Ç–æ–π).

–î–ª—è —Ç–∞–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–µ–π –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥ `keepalive` –≤ –º–µ—Ç–æ–¥–µ [fetch](https://learn.javascript.ru/fetch) –¥–ª—è –æ–±—â–∏—Ö —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ, –ø–æ—Å–≤—è—â–µ–Ω–Ω–æ–º Fetch API.

–ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –æ—Ç–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥—Ä—É–≥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, —Ç–æ –∑–¥–µ—Å—å –º—ã —ç—Ç–æ–≥–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ —Å–º–æ–∂–µ–º. –ù–æ —Å–º–æ–∂–µ–º –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ ‚Äì –≤ —Å–æ–±—ã—Ç–∏–∏ `onbeforeunload`.

#### window.onbeforeunload
–ï—Å–ª–∏ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —É–π—Ç–∏ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `beforeunload` –ø–æ–ø—Ä–æ—Å–∏—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ.

–ï—Å–ª–∏ –º—ã –æ—Ç–º–µ–Ω–∏–º —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ, —Ç–æ –±—Ä–∞—É–∑–µ—Ä —Å–ø—Ä–æ—Å–∏—Ç –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è, —É–≤–µ—Ä–µ–Ω –ª–∏ –æ–Ω.

–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —ç—Ç–æ, –∑–∞–ø—É—Å—Ç–∏–≤ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –∏ –∑–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏–≤ —Å—Ç—Ä–∞–Ω–∏—Ü—É:
```js
window.onbeforeunload = function() {
  return false;
};
```

–ü–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º –≤–æ–∑–≤—Ä–∞—Ç –Ω–µ–ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ —Ç–∞–∫ –∂–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç–º–µ–Ω–æ–π —Å–æ–±—ã—Ç–∏—è. –ö–æ–≥–¥–∞-—Ç–æ –±—Ä–∞—É–∑–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –µ—ë –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–æ, –∫–∞–∫ —É–∫–∞–∑—ã–≤–∞–µ—Ç [—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è](https://html.spec.whatwg.org/#unloading-documents), –æ–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã —ç—Ç–æ–≥–æ –¥–µ–ª–∞—Ç—å.

–í–æ—Ç –ø—Ä–∏–º–µ—Ä:
```js
window.onbeforeunload = function() {
  return "–ï—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –í—Å—ë —Ä–∞–≤–Ω–æ —É—Ö–æ–¥–∏–º?";
};
```

–ü–æ–≤–µ–¥–µ–Ω–∏–µ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è–ª–∏ —ç—Ç–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º —Å–æ–±—ã—Ç–∏—è, –ø–æ–∫–∞–∑—ã–≤–∞—è –≤–≤–æ–¥—è—â–∏–µ –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ –∏ –Ω–∞–¥–æ–µ–¥–ª–∏–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è. –¢–∞–∫ —á—Ç–æ, –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å —Å—Ç–∞—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –≤—Å—ë –µ—â—ë –º–æ–≥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–æ –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö ‚Äì –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–∫–∞–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.

#### readyState
–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –º—ã —É—Å—Ç–∞–Ω–æ–≤–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `DOMContentLoaded` –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∏–ª—Å—è?

–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –æ–Ω –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.

–ï—Å—Ç—å —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –º—ã –Ω–µ —É–≤–µ—Ä–µ–Ω—ã, –≥–æ—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç –∏–ª–∏ –Ω–µ—Ç. –ú—ã –±—ã —Ö–æ—Ç–µ–ª–∏, —á—Ç–æ–±—ã –Ω–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª–Ω–∏–ª–∞—Å—å, –∫–æ–≥–¥–∞ DOM –∑–∞–≥—Ä—É–∑–∏–ª—Å—è, –±—É–¥—å —Ç–æ —Å–µ–π—á–∞—Å –∏–ª–∏ –ø–æ–∑–∂–µ.

–°–≤–æ–π—Å—Ç–≤–æ `document.readyState` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏.

–ï—Å—Ç—å —Ç—Ä–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è:

- `"loading"` ‚Äì –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è.
- `"interactive"` ‚Äì –¥–æ–∫—É–º–µ–Ω—Ç –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—á–∏—Ç–∞–Ω.
- `"complete"` ‚Äì –¥–æ–∫—É–º–µ–Ω—Ç –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ—á–∏—Ç–∞–Ω –∏ –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã (—Ç–∞–∫–∏–µ –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) –±—ã–ª–∏ —Ç–æ–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.

–¢–∞–∫ —á—Ç–æ –º—ã –º–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `document.readyState` –∏, –ª–∏–±–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫, –ª–∏–±–æ, –µ—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç –≥–æ—Ç–æ–≤, –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥ —Å—Ä–∞–∑—É –∂–µ.

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤–æ—Ç —Ç–∞–∫:
```js
function work() { /*...*/ }

if (document.readyState == 'loading') {
  // –µ—â—ë –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –∂–¥—ë–º —Å–æ–±—ã—Ç–∏—è
  document.addEventListener('DOMContentLoaded', work);
} else {
  // DOM –≥–æ—Ç–æ–≤!
  work();
}
```

–¢–∞–∫–∂–µ –µ—Å—Ç—å —Å–æ–±—ã—Ç–∏–µ `readystatechange`, –∫–æ—Ç–æ—Ä–æ–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Ç–∞–∫ —á—Ç–æ –º—ã –º–æ–∂–µ–º –≤—ã–≤–µ—Å—Ç–∏ –≤—Å–µ —ç—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:
```js
// —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
console.log(document.readyState);

// –≤—ã–≤–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
document.addEventListener('readystatechange', () => console.log(document.readyState));
```

`readystatechange` —è–≤–ª—è–µ—Ç—Å—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º —Å–æ–±—ã—Ç–∏–µ–º, —Ä–∞–±–æ—Ç–∞—é—â–∏–º –∫–∞–∫ –¥–ª—è `document`, —Ç–∞–∫ –∏ –¥–ª—è `XMLHttpRequest/fetch`.

```js
// –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
console.log(document.readyState);

// –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è
document.addEventListener('readystatechange', (e) => {
  console.log(`readyState –∏–∑–º–µ–Ω–∏–ª—Å—è –Ω–∞: ${document.readyState}`);
});
```

–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–æ—Å—Ç–æ—è–Ω–∏–π `readyState`:
1. `loading` ‚Äî HTML –ø–∞—Ä—Å–∏—Ç—Å—è, —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

2. `interactive` ‚Äî DOM –ø–æ—Å—Ç—Ä–æ–µ–Ω, –Ω–æ –≤–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Å—Ç–∏–ª–∏) –µ—â–µ –≥—Ä—É–∑—è—Ç—Å—è

3. `complete` ‚Äî –≤—Å—ë –∑–∞–≥—Ä—É–∂–µ–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é

```js
// –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–∞–∂–¥–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
document.addEventListener('readystatechange', () => {
  switch (document.readyState) {
    case 'loading':
      console.log('üìÑ HTML –µ—â—ë –ø–∞—Ä—Å–∏—Ç—Å—è');
      break;

    case 'interactive':
      console.log('‚úÖ DOM –≥–æ—Ç–æ–≤, –≤—ã–ø–æ–ª–Ω—è–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π JS');
      // –ó–¥–µ—Å—å –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å DOM
      document.body.style.background = 'lightblue';
      break;

    case 'complete':
      console.log('üéâ –í—Å—ë –∑–∞–≥—Ä—É–∂–µ–Ω–æ!');
      // –£–¥–∞–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–Ω—ã
      document.removeEventListener('readystatechange', arguments.callee);
      break;
  }
});
```

–°–æ–±—ã—Ç–∏–µ `readystatechange` ‚Äì –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—è–≤–∏–ª—Å—è –æ—á–µ–Ω—å –¥–∞–≤–Ω–æ. –ù–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–π –¥–µ–Ω—å –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ. –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞: `DOMContentLoaded` + `load` ‚Äî –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ.

–ü–æ—á–µ–º—É —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç?

–ó–∞–º–µ–Ω–∞ `DOMContentLoaded`:
```js
// –í–º–µ—Å—Ç–æ readystatechange
document.addEventListener('DOMContentLoaded', () => {
  // DOM –≥–æ—Ç–æ–≤ (–∞–Ω–∞–ª–æ–≥ interactive)
});

// –í–º–µ—Å—Ç–æ load
window.addEventListener('load', () => {
  // –í—Å—ë –∑–∞–≥—Ä—É–∂–µ–Ω–æ (–∞–Ω–∞–ª–æ–≥ complete)
});
```

–ö–æ–≥–¥–∞ –≤—Å—ë-—Ç–∞–∫–∏ –ø–æ–ª–µ–∑–Ω–æ:
```js
// 1. –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏
// 2. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
// 3. XMLHttpRequest/fetch
fetch('/api/data')
  .addEventListener('readystatechange', () => {
    if (xhr.readyState === 4) {
      console.log('–û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω');
    }
  });
```

–î–ª—è –ø–æ–ª–Ω–æ—Ç—ã –∫–∞—Ä—Ç–∏–Ω—ã –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –≤–µ—Å—å –ø–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π:

–ó–¥–µ—Å—å –¥–æ–∫—É–º–µ–Ω—Ç —Å `<iframe>`, `<img>` –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ª–æ–≥–∏—Ä—É—é—Ç —Å–æ–±—ã—Ç–∏—è:
```html
<script>
  log('–Ω–∞—á–∞–ª—å–Ω—ã–π readyState:' + document.readyState);

  document.addEventListener('readystatechange', () => log('readyState:' + document.readyState));
  document.addEventListener('DOMContentLoaded', () => log('DOMContentLoaded'));

  window.onload = () => log('window onload');
</script>

<iframe src="iframe.html" onload="log('iframe onload')"></iframe>

<img src="http://en.js.cx/clipart/train.gif" id="img">
<script>
  img.onload = () => log('img onload');
</script>
```

[–†–∞–±–æ—á–∏–π –ø—Ä–∏–º–µ—Ä](../samples/14_res/load/index.html)

–¢–∏–ø–∏—á–Ω—ã–π –≤—ã–≤–æ–¥:

1. [1] –Ω–∞—á–∞–ª—å–Ω—ã–π readyState:loading
2. [2] readyState:interactive
3. [2] DOMContentLoaded
4. [3] iframe onload
5. [4] img onload
6. [4] readyState:complete
7. [4] window onload

–¶–∏—Ñ—Ä—ã –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö –æ–±–æ–∑–Ω–∞—á–∞—é—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è. –°–æ–±—ã—Ç–∏—è, –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π —Ü–∏—Ñ—Ä–æ–π, –ø—Ä–æ–∏–∑–æ–π–¥—É—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –≤—Ä–µ–º—è (¬± –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥).

- `document.readyState` —Å—Ç–∞–Ω–µ—Ç `interactive` –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ `DOMContentLoaded`. –≠—Ç–∏ –¥–≤–µ –≤–µ—â–∏, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –æ–±–æ–∑–Ω–∞—á–∞—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ.
- `document.readyState` —Å—Ç–∞–Ω–µ—Ç `complete`, –∫–æ–≥–¥–∞ –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã (`iframe` –∏ `img`) –∑–∞–≥—Ä—É–∑—è—Ç—Å—è. –ó–¥–µ—Å—å –º—ã –≤–∏–¥–∏–º, —á—Ç–æ —ç—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ –æ–¥–Ω–æ –≤—Ä–µ–º—è —Å `img.onload` (`img` –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ—Å—É—Ä—Å) –∏ `window.onload`. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `complete` –æ–∑–Ω–∞—á–∞–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ –∏ `window.onload`. –†–∞–∑–Ω–∏—Ü–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ `window.onload` –≤—Å–µ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ –≤—Å–µ—Ö `load` –¥—Ä—É–≥–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

#### –ò—Ç–æ–≥–æ
–°–æ–±—ã—Ç–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

- `DOMContentLoaded` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ `document`, –∫–æ–≥–¥–∞ DOM –≥–æ—Ç–æ–≤. –ú—ã –º–æ–∂–µ–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å JavaScript –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ.
    - –°–∫—Ä–∏–ø—Ç—ã, –≤—Ä–æ–¥–µ `<script>...</script>` –∏–ª–∏ `<script src="..."></script>` –±–ª–æ–∫–∏—Ä—É—é—Ç `DOMContentLoaded`, –±—Ä–∞—É–∑–µ—Ä –∂–¥—ë—Ç, –ø–æ–∫–∞ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è.
    - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã —Ç–æ–∂–µ –≤—Å—ë –µ—â—ë –º–æ–≥—É—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è.
- –°–æ–±—ã—Ç–∏–µ `load` –Ω–∞ `window` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∏ –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã. –ú—ã —Ä–µ–¥–∫–æ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–±—ã—á–Ω–æ –Ω–µ—Ç –Ω—É–∂–¥—ã –∂–¥–∞—Ç—å —Ç–∞–∫ –¥–æ–ª–≥–æ.
- –°–æ–±—ã—Ç–∏–µ `beforeunload` –Ω–∞ `window` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∏–¥–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É. –ï—Å–ª–∏ –º—ã –æ—Ç–º–µ–Ω–∏–º —Å–æ–±—ã—Ç–∏–µ, –±—Ä–∞—É–∑–µ—Ä —Å–ø—Ä–æ—Å–∏—Ç, –Ω–∞ —Å–∞–º–æ–º –ª–∏ –¥–µ–ª–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç —É–π—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É –Ω–∞—Å –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è).
- –°–æ–±—ã—Ç–∏–µ `unload` –Ω–∞ `window` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ —É—Ö–æ–¥–∏—Ç, –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –º—ã –º–æ–∂–µ–º –¥–µ–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã–µ –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏ –æ —á—ë–º –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –Ω–µ –∑–∞—Å—Ç–∞–≤–ª—è—é—Ç –µ–≥–æ –∂–¥–∞—Ç—å. –ò–∑-–∑–∞ —ç—Ç–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –æ–Ω–æ —Ä–µ–¥–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –ú—ã –º–æ–∂–µ–º –ø–æ—Å–ª–∞—Ç—å —Å–µ—Ç–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å —Å –ø–æ–º–æ—â—å—é `navigator.sendBeacon`.
- `document.readyState` ‚Äì —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å —Å –ø–æ–º–æ—â—å—é —Å–æ–±—ã—Ç–∏—è `readystatechange`:
  - `loading` ‚Äì –¥–æ–∫—É–º–µ–Ω—Ç –≥—Ä—É–∑–∏—Ç—Å—è.
  - `interactive` ‚Äì –¥–æ–∫—É–º–µ–Ω—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è, —á—Ç–æ –∏ `DOMContentLoaded`, –Ω–æ –¥–æ –Ω–µ–≥–æ.
  - `complete` ‚Äì –¥–æ–∫—É–º–µ–Ω—Ç –∏ —Ä–µ—Å—É—Ä—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è, —á—Ç–æ –∏ `window.onload`, –Ω–æ –¥–æ –Ω–µ–≥–æ.

### –°–∫—Ä–∏–ø—Ç—ã: async, defer
–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–∞–π—Ç–∞—Ö —Å–∫—Ä–∏–ø—Ç—ã –æ–±—ã—á–Ω–æ ¬´—Ç—è–∂–µ–ª–µ–µ¬ª, —á–µ–º HTML: –æ–Ω–∏ –≤–µ—Å—è—Ç –±–æ–ª—å—à–µ, –¥–æ–ª—å—à–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è.

–ö–æ–≥–¥–∞ –±—Ä–∞—É–∑–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç HTML –∏ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ —Ç–µ–≥–∞ `<script>...</script>`, –æ–Ω –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Å—Ç—Ä–æ–∏—Ç—å DOM. –û–Ω –¥–æ–ª–∂–µ–Ω —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç. –¢–æ –∂–µ —Å–∞–º–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ `<script src="..."></script>`: –±—Ä–∞—É–∑–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–¥–æ–∂–¥–∞—Ç—å, –ø–æ–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —Å–∫—Ä–∏–ø—Ç, –≤—ã–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ, –∏ —Ç–æ–ª—å–∫–æ –∑–∞—Ç–µ–º –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.

–≠—Ç–æ –≤–µ–¥—ë—Ç –∫ –¥–≤—É–º –≤–∞–∂–Ω—ã–º –ø—Ä–æ–±–ª–µ–º–∞–º:

1. –°–∫—Ä–∏–ø—Ç—ã –Ω–µ –≤–∏–¥—è—Ç DOM-—ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∏–∂–µ —Å–µ–±—è, –ø–æ—ç—Ç–æ–º—É –∫ –Ω–∏–º –Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ —Ç.–¥.
2. –ï—Å–ª–∏ –≤–≤–µ—Ä—Ö—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–±—ä—ë–º–Ω—ã–π —Å–∫—Ä–∏–ø—Ç, –æ–Ω ¬´–±–ª–æ–∫–∏—Ä—É–µ—Ç¬ª —Å—Ç—Ä–∞–Ω–∏—Ü—É. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –≤–∏–¥—è—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –ø–æ–∫–∞ –æ–Ω –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –∏ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è:

```html
<p>...—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–¥ —Å–∫—Ä–∏–ø—Ç–æ–º...</p>

<script src="https://javascript.info/article/script-async-defer/long.js?speed=1"></script>

<!-- –≠—Ç–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è, –ø–æ–∫–∞ —Å–∫—Ä–∏–ø—Ç –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è -->
<p>...—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ—Å–ª–µ —Å–∫—Ä–∏–ø—Ç–∞...</p>
```

–ö–æ–Ω–µ—á–Ω–æ, –µ—Å—Ç—å –ø—É—Ç–∏, –∫–∞–∫ —ç—Ç–æ –æ–±–æ–π—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –º—ã –º–æ–∂–µ–º –ø–æ–º–µ—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –¢–æ–≥–¥–∞ –æ–Ω —Å–º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–¥ –Ω–∏–º –∏ –Ω–µ –±—É–¥–µ—Ç –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—é —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
```html
<body>
  ...–≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞–¥ —Å–∫—Ä–∏–ø—Ç–æ–º...

  <script src="https://javascript.info/article/script-async-defer/long.js?speed=1"></script>
</body>
```

–ù–æ —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –¥–∞–ª–µ–∫–æ –æ—Ç –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –±—Ä–∞—É–∑–µ—Ä –∑–∞–º–µ—á–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç (–∏ –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –∑–∞–≥—Ä—É–∂–∞—Ç—å –µ–≥–æ) —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∏–ª HTML-–¥–æ–∫—É–º–µ–Ω—Ç. –í —Å–ª—É—á–∞–µ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ —ç—Ç–æ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∑–∞–º–µ—Ç–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É.

–¢–∞–∫–∏–µ –≤–µ—â–∏ –Ω–µ–∑–∞–º–µ—Ç–Ω—ã –ª—é–¥—è–º, —É –∫–æ–≥–æ –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –Ω–æ –º–Ω–æ–≥–æ –∫—Ç–æ –≤ –º–∏—Ä–µ –∏–º–µ–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ —Ç–∞–∫–æ–π —Ö–æ—Ä–æ—à–∏–π –º–æ–±–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.

–ö —Å—á–∞—Å—Ç—å—é, –µ—Å—Ç—å –¥–≤–∞ –∞—Ç—Ä–∏–±—É—Ç–∞ —Ç–µ–≥–∞ `<script>`, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞—é—Ç –Ω–∞—à—É –ø—Ä–æ–±–ª–µ–º—É: `defer` –∏ `async`.[^script-async-defer]

#### defer
–ê—Ç—Ä–∏–±—É—Ç `defer` —Å–æ–æ–±—â–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä—É, —á—Ç–æ –æ–Ω –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, –∞ –∑–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç, –∫–æ–≥–¥–∞ DOM –¥–µ—Ä–µ–≤–æ –±—É–¥–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ.

–í–æ—Ç —Ç–æ—Ç –∂–µ –ø—Ä–∏–º–µ—Ä, —á—Ç–æ –∏ –≤—ã—à–µ, –Ω–æ —Å `defer`:
```html
<p>...—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–¥ —Å–∫—Ä–∏–ø—Ç–æ–º...</p>

<script defer src="https://javascript.info/article/script-async-defer/long.js?speed=1"></script>

<!-- –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –∂–µ -->
<p>...—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ—Å–ª–µ —Å–∫—Ä–∏–ø—Ç–∞...</p>
```

- –°–∫—Ä–∏–ø—Ç—ã —Å `defer` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É.
- –°–∫—Ä–∏–ø—Ç—ã —Å `defer` –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è, –∫–æ–≥–¥–∞ –¥–µ—Ä–µ–≤–æ DOM –≥–æ—Ç–æ–≤–æ, –Ω–æ –¥–æ —Å–æ–±—ã—Ç–∏—è `DOMContentLoaded`.

–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä —ç—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
```html
<p>...—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ —Å–∫—Ä–∏–ø—Ç–∞...</p>

<script>
  document.addEventListener('DOMContentLoaded', () => alert("–î–µ—Ä–µ–≤–æ DOM –≥–æ—Ç–æ–≤–æ –ø–æ—Å–ª–µ —Å–∫—Ä–∏–ø—Ç–∞ —Å 'defer'!"));
</script>

<script defer src="https://javascript.info/article/script-async-defer/long.js?speed=1"></script> // (2)

<p>...—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ—Å–ª–µ —Å–∫—Ä–∏–ø—Ç–∞...</p>
```

1. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.
2. –°–æ–±—ã—Ç–∏–µ `DOMContentLoaded` –ø–æ–¥–æ–∂–¥—ë—Ç –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç. –û–Ω–æ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ, —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Å–∫—Ä–∏–ø—Ç `(2)` –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω.

**–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é `defer` —Å–∫—Ä–∏–ø—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –ø–æ—Ä—è–¥–æ–∫ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –¥—Ä—É–≥ –¥—Ä—É–≥–∞, –∫–∞–∫ –∏ –æ–±—ã—á–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã.**

–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å –µ—Å—Ç—å –¥–≤–∞ —Å–∫—Ä–∏–ø—Ç–∞ c `defer`: `small.js` –∏ `long.js`:
```html
<script defer src="https://javascript.info/article/script-async-defer/long.js"></script>
<script defer src="https://javascript.info/article/script-async-defer/small.js"></script>
```

–ë—Ä–∞—É–∑–µ—Ä—ã —Å–∫–∞–Ω–∏—Ä—É—é—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç –∏—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤ —Ü–µ–ª—è—Ö —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ü–æ—ç—Ç–æ–º—É –∏ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ –æ–±–∞ —Å–∫—Ä–∏–ø—Ç–∞ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –ø—Ä–∏ —ç—Ç–æ–º *small.js* —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –ø–µ—Ä–≤—ã–º.

‚Ä¶–ù–æ `defer` –Ω–µ —Ç–æ–ª—å–∫–æ –≥–æ–≤–æ—Ä–∏—Ç –±—Ä–∞—É–∑–µ—Ä—É ¬´–Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥¬ª, –æ–Ω —Ç–∞–∫–∂–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤. –î–∞–∂–µ –µ—Å–ª–∏ *small.js* –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –ø–µ—Ä–≤—ã–º, –æ–Ω –±—É–¥–µ—Ç –∂–¥–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è *long.js*.

–≠—Ç–æ –≤–∞–∂–Ω–æ –≤ —Ç–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –Ω–∞–º —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å JavaScript-–±–∏–±–ª–∏–æ—Ç–µ–∫—É, –∞ –∑–∞—Ç–µ–º —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç –Ω–µ—ë –∑–∞–≤–∏—Å–∏—Ç.

!!! info "–ê—Ç—Ä–∏–±—É—Ç `defer` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤"
    –ê—Ç—Ä–∏–±—É—Ç `defer` –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω, –µ—Å–ª–∏ –≤ —Ç–µ–≥–µ `<script>` –Ω–µ—Ç `src`.

#### async
–ê—Ç—Ä–∏–±—É—Ç `async` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º:

- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –∂–¥—ë—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤, —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.
- –°–æ–±—ã—Ç–∏–µ `DOMContentLoaded` –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ –∂–¥—É—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞:
    - `DOMContentLoaded` –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –∫–∞–∫ –¥–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ (–µ—Å–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–∏—Ç –∑–∞–≥—Ä—É–∑–∫—É –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞),
    - ‚Ä¶—Ç–∞–∫ –∏ –ø–æ—Å–ª–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ (–µ—Å–ª–∏ –æ–Ω –∫–æ—Ä–æ—Ç–∫–∏–π –∏–ª–∏ —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ HTTP-–∫–µ—à–µ)
- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ –∂–¥—É—Ç `async`, –∏ —Å–∫—Ä–∏–ø—Ç—ã c `async` –Ω–µ –∂–¥—É—Ç –¥—Ä—É–≥–∏–µ —Å–∫—Ä–∏–ø—Ç—ã.

–¢–∞–∫ —á—Ç–æ –µ—Å–ª–∏ —É –Ω–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∫—Ä–∏–ø—Ç–æ–≤ —Å `async`, –æ–Ω–∏ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ. –¢–æ, —á—Ç–æ –ø–µ—Ä–≤–æ–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è ‚Äì –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å:
```html
<p>...—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–µ—Ä–µ–¥ —Å–∫—Ä–∏–ø—Ç–∞–º–∏...</p>

<script>
  document.addEventListener('DOMContentLoaded', () => alert("DOM –≥–æ—Ç–æ–≤!"));
</script>

<script async src="https://javascript.info/article/script-async-defer/long.js"></script>
<script async src="https://javascript.info/article/script-async-defer/small.js"></script>

<p>...—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ—Å–ª–µ —Å–∫—Ä–∏–ø—Ç–æ–≤...</p>
```

1. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –∂–µ: `async` –µ–≥–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç.
2. `DOMContentLoaded` –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –∫–∞–∫ –¥–æ, —Ç–∞–∫ –∏ –ø–æ—Å–ª–µ `async`, –Ω–∏–∫–∞–∫–∏—Ö –≥–∞—Ä–∞–Ω—Ç–∏–π –Ω–µ—Ç.
3. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–µ –∂–¥—É—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –ú–µ–Ω—å—à–∏–π —Å–∫—Ä–∏–ø—Ç *small.js* –∏–¥—ë—Ç –≤—Ç–æ—Ä—ã–º, –Ω–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è —Ä–∞–Ω—å—à–µ *long.js*, –ø–æ—ç—Ç–æ–º—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–µ—Ä–≤—ã–º. –¢–æ –µ—Å—Ç—å, —Å–∫—Ä–∏–ø—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏.

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤: —Å—á—ë—Ç—á–∏–∫–æ–≤, —Ä–µ–∫–ª–∞–º—ã –∏ —Ç.–¥. –û–Ω–∏ –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –Ω–∞—à–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤, –∏ –º—ã —Ç–æ–∂–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –∂–¥–∞—Ç—å –∏—Ö:
```html
<!-- –¢–∏–ø–∏—á–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ Google Analytics -->
<script async src="https://google-analytics.com/analytics.js"></script>
```

!!! info "–ê—Ç—Ä–∏–±—É—Ç async –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤"
    –ö–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å `defer`, –∞—Ç—Ä–∏–±—É—Ç `async` –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω, –µ—Å–ª–∏ –≤ —Ç–µ–≥–µ `<script>` –Ω–µ—Ç `src`.

#### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
–ú—ã –º–æ–∂–µ–º —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏, —Å –ø–æ–º–æ—â—å—é JavaScript:
```js
let script = document.createElement('script');
script.src = "/article/script-async-defer/long.js";
document.body.append(script); // (*)
```

–°–∫—Ä–∏–ø—Ç –Ω–∞—á–Ω—ë—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–Ω –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –¥–æ–∫—É–º–µ–Ω—Ç `(*)`.

**–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–µ–¥—É—Ç —Å–µ–±—è –∫–∞–∫ ¬´async¬ª.**

–¢–æ –µ—Å—Ç—å:

- –û–Ω–∏ –Ω–∏–∫–æ–≥–æ –Ω–µ –∂–¥—É—Ç, –∏ –∏—Ö –Ω–∏–∫—Ç–æ –Ω–µ –∂–¥—ë—Ç.
- –°–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º ‚Äì –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º (–≤ –ø–æ—Ä—è–¥–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏).

–ú—ã –º–æ–∂–µ–º –∏–∑–º–µ–Ω–∏—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤ —Å ¬´–ø–µ—Ä–≤—ã–π –∑–∞–≥—Ä—É–∑–∏–ª—Å—è ‚Äì –ø–µ—Ä–≤—ã–π –≤—ã–ø–æ–ª–Ω–∏–ª—Å—è¬ª –Ω–∞ –ø–æ—Ä—è–¥–æ–∫, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω–∏ –∏–¥—É—Ç –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ (–∫–∞–∫ –≤ –æ–±—ã—á–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö) —Å –ø–æ–º–æ—â—å—é —è–≤–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–≤–æ–π—Å—Ç–≤–∞ `async` –≤ `false`:
```js
let script = document.createElement('script');
script.src = "/article/script-async-defer/long.js";

script.async = false;

document.body.append(script);
```

–ù–∞–ø—Ä–∏–º–µ—Ä, –∑–¥–µ—Å—å –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –¥–≤–∞ —Å–∫—Ä–∏–ø—Ç–∞. –ë–µ–∑ `script.async=false` –æ–Ω–∏ –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å –±—ã –≤ –ø–æ—Ä—è–¥–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏ (*small.js* —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –±—ã —Ä–∞–Ω—å—à–µ). –ù–æ —Å —ç—Ç–∏–º —Ñ–ª–∞–≥–æ–º –ø–æ—Ä—è–¥–æ–∫ –±—É–¥–µ—Ç –∫–∞–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ:
```js
function loadScript(src) {
  let script = document.createElement('script');
  script.src = src;
  script.async = false;
  document.body.append(script);
}

// long.js –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º, —Ç–∞–∫ –∫–∞–∫ async=false
loadScript("/article/script-async-defer/long.js");
loadScript("/article/script-async-defer/small.js");
```

#### –ò—Ç–æ–≥–æ
–£ `async` –∏ `defer` –µ—Å—Ç—å –∫–æ–µ-—á—Ç–æ –æ–±—â–µ–µ: –æ–Ω–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –¢–∞–∫ —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –Ω–µ–π —Å—Ä–∞–∑—É –∂–µ.

–ù–æ –µ—Å—Ç—å –∏ –∑–Ω–∞—á–∏–º—ã–µ —Ä–∞–∑–ª–∏—á–∏—è:


| | –ü–æ—Ä—è–¥–æ–∫ | `DOMContentLoaded`
-- | -- | --
`async` |	*–ü–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏* (–∫—Ç–æ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –ø–µ—Ä–≤—ã–º, —Ç–æ—Ç –∏ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç). | –ù–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è. –ú–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è. –¢–∞–∫–æ–µ —Å–ª—É—á–∞–µ—Ç—Å—è, –µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –º–∞–ª–µ–Ω—å–∫–∏–µ –∏–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–µ—à–µ, –∞ –¥–æ–∫—É–º–µ–Ω—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–π.
`defer` | *–ü–æ—Ä—è–¥–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞* (–∫–∞–∫ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ). | –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω (–∂–¥—ë—Ç), –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥ `DOMContentLoaded`.

!!! warning "–°—Ç—Ä–∞–Ω–∏—Ü–∞ –±–µ–∑ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞–±–æ—á–µ–π"
    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –∫–æ–≥–¥–∞ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `defer`, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–∏–¥–Ω–∞ –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è.

    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã, —á–∏—Ç–∞—Ç—å –µ—ë, –Ω–æ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω—ã.

    –ü–æ—ç—Ç–æ–º—É –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏, –Ω–µ—Ä–∞–±–æ—á–∏–µ –∫–Ω–æ–ø–∫–∏ ‚Äì –æ—Ç–∫–ª—é—á–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é CSS –∏–ª–∏ –¥—Ä—É–≥–∏–º –æ–±—Ä–∞–∑–æ–º. –ß—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ –≤–∏–¥–µ–ª, —á—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ, –∞ —á—Ç–æ –ø–æ–∫–∞ –Ω–µ—Ç.

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ `defer` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É DOM –∏/–∏–ª–∏ –≤–∞–∂–µ–Ω –∏—Ö –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

–ê `async` —Ö–æ—Ä–æ—à –¥–ª—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä —Å—á—ë—Ç—á–∏–∫–æ–≤ –∏ —Ä–µ–∫–ª–∞–º—ã, –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –∏–≥—Ä–∞–µ—Ç —Ä–æ–ª–∏.

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤: onload –∏ onerror
–ë—Ä–∞—É–∑–µ—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤: —Å–∫—Ä–∏–ø—Ç–æ–≤, –∏—Ñ—Ä–µ–π–º–æ–≤, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –¥—Ä.

–î–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –¥–≤–∞ —Å–æ–±—ã—Ç–∏—è:

- `load` ‚Äì —É—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞,
- `error` ‚Äì –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.

#### –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤
–î–æ–ø—É—Å—Ç–∏–º, –Ω–∞–º –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –∏ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä—è–≤–ª–µ–Ω–∞ –≤ —ç—Ç–æ–º —Å–∫—Ä–∏–ø—Ç–µ.

–ú—ã –º–æ–∂–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏:
```js
let script = document.createElement('script');
script.src = "my.js";

document.head.append(script);
```

‚Ä¶–ù–æ –∫–∞–∫ –Ω–∞–º –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä—è–≤–ª–µ–Ω–∞ –≤–Ω—É—Ç—Ä–∏ —Ç–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞? –ù–∞–º –Ω—É–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å, –ø–æ–∫–∞ —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è, –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –º—ã –º–æ–∂–µ–º –µ—ë –≤—ã–∑–≤–∞—Ç—å.

!!! info "–ù–∞ –∑–∞–º–µ—Ç–∫—É:"
    –î–ª—è –Ω–∞—à–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JavaScript-–º–æ–¥—É–ª–∏, –Ω–æ –æ–Ω–∏ –Ω–µ —Å–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω—ã –≤ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö.

##### script.onload
–ì–ª–∞–≤–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ ‚Äì —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ `load`. –û–Ω–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Å–∫—Ä–∏–ø—Ç –±—ã–ª –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω.

–ù–∞–ø—Ä–∏–º–µ—Ä:
```js
let script = document.createElement('script');

// –º—ã –º–æ–∂–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –ª—é–±–æ–π —Å–∫—Ä–∏–ø—Ç —Å –ª—é–±–æ–≥–æ –¥–æ–º–µ–Ω–∞
script.src = "https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.3.0/lodash.js"
document.head.append(script);

script.onload = function() {
  // –≤ —Å–∫—Ä–∏–ø—Ç–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å –∏–º–µ–Ω–µ–º "_"
  alert(_.VERSION); // –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤–µ—Ä—Å–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
};
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ `onload` –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ç.–¥., –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–º —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π —Å–∫—Ä–∏–ø—Ç.

‚Ä¶–ê —á—Ç–æ –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞? –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–µ—Ç (–æ—à–∏–±–∫–∞ 404), –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –±—ã–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

##### script.onerror
–û—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞, –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç—Å–ª–µ–∂–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é —Å–æ–±—ã—Ç–∏—è `error`.

–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–∞–≤–∞–π—Ç–µ –∑–∞–ø—Ä–æ—Å–∏–º —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
```js
let script = document.createElement('script');
script.src = "https://example.com/404.js"; // —Ç–∞–∫–æ–≥–æ —Ñ–∞–π–ª–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
document.head.append(script);

script.onerror = function() {
  alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ " + this.src); // –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ https://example.com/404.js
};
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –º—ã –Ω–µ –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ HTTP-–æ—à–∏–±–∫–∏. –ú—ã –Ω–µ –∑–Ω–∞–µ–º, –±—ã–ª–∞ –ª–∏ —ç—Ç–æ –æ—à–∏–±–∫–∞ 404 –∏–ª–∏ 500, –∏–ª–∏ –∫–∞–∫–∞—è-—Ç–æ –¥—Ä—É–≥–∞—è. –ó–Ω–∞–µ–º —Ç–æ–ª—å–∫–æ, —á—Ç–æ –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞.

!!! warning "–í–∞–∂–Ω–æ:"
    –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `onload`/`onerror` –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å–∞–º –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏.

    –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –∏–º–∏ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è. –ß—Ç–æ–±—ã ¬´–ø–æ–π–º–∞—Ç—å¬ª –æ—à–∏–±–∫–∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ, –Ω—É–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–º window.onerror.

#### –î—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã
–°–æ–±—ã—Ç–∏—è `load` –∏ `error` —Ç–∞–∫–∂–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, –∞ –≤–æ–æ–±—â–µ, –¥–ª—è –ª—é–±—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –≤–Ω–µ—à–Ω–∏–π `src`.

–ù–∞–ø—Ä–∏–º–µ—Ä:
```js
let img = document.createElement('img');
img.src = "https://js.cx/clipart/train.gif"; // (*)

img.onload = function() {
  alert(`–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ, —Ä–∞–∑–º–µ—Ä—ã ${img.width}x${img.height}`);
};

img.onerror = function() {
  alert("–û—à–∏–±–∫–∞ –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è");
};
```

–û–¥–Ω–∞–∫–æ –µ—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞—á–∏–Ω–∞—é—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –ø–æ—Å–ª–µ –∏—Ö –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç. –ó–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–µ–≥–∞ `<img>`. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è, –∫–æ–≥–¥–∞ –ø–æ–ª—É—á–∞—é—Ç `src (*)`.
- –î–ª—è `<iframe>` —Å–æ–±—ã—Ç–∏–µ `load` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞–∫ –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞, —Ç–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏.

–¢–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–ª–æ–∂–∏–ª–æ—Å—å –ø–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º.

#### –û—à–∏–±–∫–∞ –≤ —Å–∫—Ä–∏–ø—Ç–µ —Å –¥—Ä—É–≥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
–ï—Å—Ç—å –ø—Ä–∞–≤–∏–ª–æ: —Å–∫—Ä–∏–ø—Ç—ã —Å –æ–¥–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É –¥—Ä—É–≥–æ–≥–æ —Å–∞–π—Ç–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, —Å–∫—Ä–∏–ø—Ç —Å https://facebook.com –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø–æ—á—Ç—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ https://gmail.com.

–ò–ª–∏, –µ—Å–ª–∏ –±—ã—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º, –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ (–¥–æ–º–µ–Ω/–ø–æ—Ä—Ç/–ø—Ä–æ—Ç–æ–∫–æ–ª) –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É —Å –¥—Ä—É–≥–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞. –î–∞–∂–µ –ø–æ–¥–¥–æ–º–µ–Ω –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç –±—É–¥—É—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è —Ä–∞–∑–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏, –Ω–µ –∏–º–µ—é—â–∏–º–∏ –¥–æ—Å—Ç—É–ø–∞ –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É.

–≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ —Ç–∞–∫–∂–µ –∫–∞—Å–∞–µ—Ç—Å—è —Ä–µ—Å—É—Ä—Å–æ–≤ —Å –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–æ–≤.

–ï—Å–ª–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∫—Ä–∏–ø—Ç —Å –¥—Ä—É–≥–æ–≥–æ –¥–æ–º–µ–Ω–∞, –∏ –≤ –Ω–µ–º –∏–º–µ–µ—Ç—Å—è –æ—à–∏–±–∫–∞, –º—ã –Ω–µ —Å–º–æ–∂–µ–º —É–∑–Ω–∞—Ç—å –¥–µ—Ç–∞–ª–∏ —ç—Ç–æ–π –æ—à–∏–±–∫–∏.

–î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –¥–∞–≤–∞–π—Ç–µ –≤–æ–∑—å–º—ë–º –º–∏–Ω–∏-—Å–∫—Ä–∏–ø—Ç error.js, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ–¥–Ω–æ–≥–æ-–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–æ–π –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
```js
// üìÅ error.js
noSuchFunction();
```

–¢–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∑–∏–º —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å —Ç–æ–≥–æ –∂–µ —Å–∞–π—Ç–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω –ª–µ–∂–∏—Ç:
```html
<script>
window.onerror = function(message, url, line, col, errorObj) {
  alert(`${message}\n${url}, ${line}:${col}`);
};
</script>
<script src="/article/onload-onerror/crossorigin/error.js"></script>
```

–ú—ã –≤–∏–¥–∏–º –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –æ–± –æ—à–∏–±–∫–µ:
```
Uncaught ReferenceError: noSuchFunction is not defined
https://javascript.info/article/onload-onerror/crossorigin/error.js, 1:1
```

–ê —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∑–∏–º —ç—Ç–æ—Ç –∂–µ —Å–∫—Ä–∏–ø—Ç —Å –¥—Ä—É–≥–æ–≥–æ –¥–æ–º–µ–Ω–∞:
```html
<script>
window.onerror = function(message, url, line, col, errorObj) {
  alert(`${message}\n${url}, ${line}:${col}`);
};
</script>
<script src="https://cors.javascript.info/article/onload-onerror/crossorigin/error.js"></script>
```

–û—Ç—á—ë—Ç –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è:
```
Script error.
, 0:0
```

–î–µ—Ç–∞–ª–∏ –æ—Ç—á—ë—Ç–∞ –º–æ–≥—É—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞, –Ω–æ –æ—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω–æ–π: –ª—é–±–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å–∫—Ä–∏–ø—Ç–∞, –≤–∫–ª—é—á–∞—è —Å—Ç–µ–∫ –æ—à–∏–±–∫–∏, —Å–ø—Ä—è—Ç–∞–Ω–∞. –ò–º–µ–Ω–Ω–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —Å –¥—Ä—É–≥–æ–≥–æ –¥–æ–º–µ–Ω–∞.

–ó–∞—á–µ–º –Ω–∞–º –º–æ–≥—É—Ç –±—ã—Ç—å –Ω—É–∂–Ω—ã –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏?

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–æ–≤ (–∏ –º—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –Ω–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π), –∫–æ—Ç–æ—Ä—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `window.onerror`, —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –æ—Ç—á—ë—Ç –æ –Ω–∏—Ö –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–æ–º—É –æ—Ç—á—ë—Ç—É –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞. –≠—Ç–æ –∑–¥–æ—Ä–æ–≤–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–ª—É—á–∏–ª–∏—Å—å —É –Ω–∞—à–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ù–æ –µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç ‚Äì —Å –¥—Ä—É–≥–æ–≥–æ –¥–æ–º–µ–Ω–∞, —Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—à–∏–±–∫–∞—Ö –≤ –Ω—ë–º –ø–æ—á—Ç–∏ –Ω–µ—Ç, –∫–∞–∫ –º—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –≤–∏–¥–µ–ª–∏.

–ü–æ—Ö–æ–∂–∞—è –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ (CORS) –≤–Ω–µ–¥—Ä–µ–Ω–∞ –∏ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –¥—Ä—É–≥–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.

**–ß—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø, –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–≥—É `<script>` –∞—Ç—Ä–∏–±—É—Ç `crossorigin`, –∏, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, —É–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏.**

–°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç—Ä–∏ —É—Ä–æ–≤–Ω—è –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:

1. **–ê—Ç—Ä–∏–±—É—Ç `crossorigin` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** ‚Äì –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω.
2. **–ê—Ç—Ä–∏–±—É—Ç `crossorigin="anonymous"`** ‚Äì –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `Access-Control-Allow-Origin` —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ `*` –∏–ª–∏ *`–Ω–∞—à –¥–æ–º–µ–Ω`*. –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –∫—É–∫–∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.
3. **–ê—Ç—Ä–∏–±—É—Ç `crossorigin="use-credentials"`** ‚Äì –¥–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ `Access-Control-Allow-Origin` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º *`–Ω–∞—à –¥–æ–º–µ–Ω`* –∏ `Access-Control-Allow-Credentials: true`. –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –∫—É–∫–∏ –Ω–∞ —É–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.

!!! info "–ù–∞ –∑–∞–º–µ—Ç–∫—É:"
    –ü–æ—á–∏—Ç–∞—Ç—å –±–æ–ª—å—à–µ –æ –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–∞—Ö –≤—ã –º–æ–∂–µ—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª–µ –æ Fetch –∏ –∑–∞–ø—Ä–æ—Å–∞—Ö –Ω–∞ –¥—Ä—É–≥–∏–µ —Å–∞–π—Ç—ã. –¢–∞–º –æ–ø–∏—Å–∞–Ω –º–µ—Ç–æ–¥ `fetch` –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –Ω–æ –ø–æ–ª–∏—Ç–∏–∫–∞ —Ç–∞–º —Ç–æ—á–Ω–æ —Ç–∞–∫–∞—è –∂–µ.

    –¢–∞–∫–æ–µ –ø–æ–Ω—è—Ç–∏–µ –∫–∞–∫ ¬´–∫—É–∫–∏¬ª (cookies) –Ω–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –≥–ª–∞–≤–µ, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—á–∏—Ç–∞—Ç—å –æ –Ω–∏—Ö –≤ —Ä–∞–∑–¥–µ–ª–µ, –ø–æ—Å–≤—è—â–µ–Ω–Ω–æ–º–º –∫—É–∫–∏ (`document.cookie`).

–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –∞—Ç—Ä–∏–±—É—Ç `crossorigin` –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª. –ü–æ—ç—Ç–æ–º—É –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –±—ã–ª –∑–∞–ø—Ä–µ—â—ë–Ω. –î–∞–≤–∞–π—Ç–µ –¥–æ–±–∞–≤–∏–º –µ–≥–æ.

–ú—ã –º–æ–∂–µ–º –≤—ã–±—Ä–∞—Ç—å `"anonymous"` (–∫—É–∫–∏ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è, —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫) –∏–ª–∏ `"use-credentials"` (–∫—É–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è, —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–≤–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–∞) –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–∞.

–ï—Å–ª–∏ –∫—É–∫–∏ –Ω–∞—Å –Ω–µ –≤–æ–ª–Ω—É—é—Ç, —Ç–æ–≥–¥–∞ —Å–º–µ–ª–æ –≤—ã–±–∏—Ä–∞–µ–º `"anonymous"`:
```html
<script>
window.onerror = function(message, url, line, col, errorObj) {
  alert(`${message}\n${url}, ${line}:${col}`);
};
</script>
<script crossorigin="anonymous" src="https://cors.javascript.info/article/onload-onerror/crossorigin/error.js"></script>
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Access-Control-Allow-Origin`, –≤—Å—ë —Ö–æ—Ä–æ—à–æ. –£ –Ω–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ –æ—à–∏–±–∫–∞–º.

#### –ò—Ç–æ–≥–æ
–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è `<img>`, –≤–Ω–µ—à–Ω–∏–µ —Å—Ç–∏–ª–∏, —Å–∫—Ä–∏–ø—Ç—ã –∏ –¥—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±—ã—Ç–∏—è `load` –∏ `error` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏:

- `load` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ,
- `error` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏.

–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ ‚Äì —ç—Ç–æ `<iframe>`: –ø–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ–≥–¥–∞ `load` –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –∑–∞–≥—Ä—É–∑–∫–∞, –¥–∞–∂–µ –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞.

–°–æ–±—ã—Ç–∏–µ `readystatechange` —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–æ–±—ã—Ç–∏—è `load`/`error` –ø—Ä–æ—â–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏.

#### –ó–∞–¥–∞—á–∏

##### –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∫–æ–ª–±—ç–∫–æ–º

–û–±—ã—á–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –≤ –º–æ–º–µ–Ω—Ç –∏—Ö —Å–æ–∑–¥–∞–Ω–∏—è. –ö–æ–≥–¥–∞ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º `<img>` –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É–≤–∏–¥–∏—Ç –µ–≥–æ —Ç—É—Ç –∂–µ. –ë—Ä–∞—É–∑–µ—Ä —Å–Ω–∞—á–∞–ª–∞ –¥–æ–ª–∂–µ–Ω –µ–≥–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å.

–ß—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ä–∞–∑—É, –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –µ–≥–æ ¬´–∑–∞—Ä–∞–Ω–µ–µ¬ª:
```js
let img = document.createElement('img');
img.src = 'my.jpg';
```

–ë—Ä–∞—É–∑–µ—Ä –Ω–∞—á–Ω—ë—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –ø–æ–ª–æ–∂–∏—Ç –µ–≥–æ –≤ –∫–µ—à. –ü–æ–∑–∂–µ, –∫–æ–≥–¥–∞ —Ç–∞–∫–æ–µ –∂–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ (–Ω–µ –≤–∞–∂–Ω–æ –∫–∞–∫), –æ–Ω–æ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.

**–°–æ–∑–¥–∞–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `preloadImages(sources, callback)`, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –º–∞—Å—Å–∏–≤–∞ `sources` –∏, –∫–æ–≥–¥–∞ –≤—Å–µ –æ–Ω–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –≤—ã–∑—ã–≤–∞–µ—Ç `callback`.**

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω `alert` –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

```js
function loaded() {
  alert("–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã")
}

preloadImages(["1.jpg", "2.jpg", "3.jpg"], loaded);
```

–í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å—á–∏—Ç–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ¬´–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º¬ª.

–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, `callback` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –∫–æ–≥–¥–∞ –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–∏–±–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –ª–∏–±–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏—Ö –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞.

–¢–∞–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª–µ–∑–Ω–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≥–∞–ª–µ—Ä–µ—é —Å –º–∞–ª–µ–Ω—å–∫–∏–º–∏ —Å–∫—Ä–æ–ª—è—â–∏–º–∏—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏, –∏ –º—ã —Ö–æ—Ç–∏–º –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –≤—Å–µ –∏–∑ –Ω–∏—Ö –∑–∞–≥—Ä—É–∂–µ–Ω—ã.

–í –ø–µ—Å–æ—á–Ω–∏—Ü–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –∫ —Ç–µ—Å—Ç–æ–≤—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º, –∞ —Ç–∞–∫–∂–µ –∫–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Ö –∑–∞–≥—Ä—É–∑–∫–∏. –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –≤—ã–≤–æ–¥–∏—Ç—å `300`.

<details>
<summary>–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ—à–µ–Ω–∏—è</summary>

1. –°–æ–∑–¥–∞–¥–∏–º `img` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞.
2. –î–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `onload`/`onerror` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.
3. –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ `onload` –∏–ª–∏ `onerror`  .
4. –ö–æ–≥–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ —Ä–∞–≤–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ä–µ—Å—É—Ä—Å–æ–≤ ‚Äì —Ç–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ–º `callback()`.

</details>

[–ö–æ–¥ —Ä–µ—à–µ–Ω–∏—è](../src/14_res/preload.html)

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

#### –ó–∞–¥–∞–Ω–∏–µ

–û–±—ã—á–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—é—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –≤ –º–æ–º–µ–Ω—Ç –∏—Ö —Å–æ–∑–¥–∞–Ω–∏—è. –ö–æ–≥–¥–∞ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º `<img>` –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —É–≤–∏–¥–∏—Ç –µ–≥–æ —Ç—É—Ç –∂–µ. –ë—Ä–∞—É–∑–µ—Ä —Å–Ω–∞—á–∞–ª–∞ –¥–æ–ª–∂–µ–Ω –µ–≥–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å.

–ß—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ä–∞–∑—É, –º—ã –º–æ–∂–µ–º —Å–æ–∑–¥–∞—Ç—å –µ–≥–æ ¬´–∑–∞—Ä–∞–Ω–µ–µ¬ª:
```js
let img = document.createElement('img');
img.src = 'my.jpg';
```

–ë—Ä–∞—É–∑–µ—Ä –Ω–∞—á–Ω—ë—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –ø–æ–ª–æ–∂–∏—Ç –µ–≥–æ –≤ –∫–µ—à. –ü–æ–∑–∂–µ, –∫–æ–≥–¥–∞ —Ç–∞–∫–æ–µ –∂–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ (–Ω–µ –≤–∞–∂–Ω–æ –∫–∞–∫), –æ–Ω–æ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–æ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.

**–°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `preloadImages(sources, callback)`, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ –º–∞—Å—Å–∏–≤–∞ `sources` –∏, –∫–æ–≥–¥–∞ –≤—Å–µ –æ–Ω–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –≤—ã–∑—ã–≤–∞–µ—Ç `callback`.**

–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω `alert` –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

```js
function loaded() {
  alert("–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã")
}

preloadImages(["1.jpg", "2.jpg", "3.jpg"], loaded);
```

–í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Å—á–∏—Ç–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ ¬´–∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º¬ª.

–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, `callback` –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –∫–æ–≥–¥–∞ –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ª–∏–±–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –ª–∏–±–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏—Ö –∑–∞–≥—Ä—É–∑–∫–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞.

–¢–∞–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª–µ–∑–Ω–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≥–∞–ª–µ—Ä–µ—é —Å –º–∞–ª–µ–Ω—å–∫–∏–º–∏ —Å–∫—Ä–æ–ª—è—â–∏–º–∏—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏, –∏ –º—ã —Ö–æ—Ç–∏–º –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ –≤—Å–µ –∏–∑ –Ω–∏—Ö –∑–∞–≥—Ä—É–∂–µ–Ω—ã.

<details>
<summary>–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ—à–µ–Ω–∏—è</summary>

1. –°–æ–∑–¥–∞–µ–º `img` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞.
2. –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `onload`/`onerror` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.
3. –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ `onload` –∏–ª–∏ `onerror`  .
4. –ö–æ–≥–¥–∞ –∑–Ω–∞—á–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ä–∞–≤–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ä–µ—Å—É—Ä—Å–æ–≤, —Ç–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ–º `callback()`.

</details>

–†–µ—à–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤ –≤–∏–¥–µ —Ñ–∞–π–ª–æ–≤ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞.

[–ö–æ–¥ —Ä–µ—à–µ–Ω–∏—è](../src/14_res/preload.html)

### –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–ó–∞–≥—Ä—É–∑–∫–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Äî —ç—Ç–æ –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –≥–¥–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –∫–æ–≥–¥–∞ –∏ —á—Ç–æ –º–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —ç—Ç–∞–ø—ã –æ—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ HTML (`readyState: loading`) —á–µ—Ä–µ–∑ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ DOM (`DOMContentLoaded` –ø—Ä–∏ `interactive`) –∫ –ø–æ–ª–Ω–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ (`load` –ø—Ä–∏ `complete`), –¥–æ–ø–æ–ª–Ω—è—è—Å—å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ (`onerror`/`onload`) –∏ —Å–æ–±—ã—Ç–∏—è–º–∏ —É—Ö–æ–¥–∞ (`beforeunload`/`unload`), –≥–¥–µ —Å–∫—Ä–∏–ø—Ç—ã –∏–≥—Ä–∞—é—Ç –∫–ª—é—á–µ–≤—É—é —Ä–æ–ª—å: –æ–±—ã—á–Ω—ã–µ –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –ø–∞—Ä—Å–∏–Ω–≥, `async` –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏, `defer` ‚Äî –ø–æ—Å–ª–µ DOM, –∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ —á–µ—Ä–µ–∑ `document.createElement('script')` –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é —Å Promise-–ø–æ–¥–æ–±–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π.

–î–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ UI –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `DOMContentLoaded` ‚Äî DOM —É–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω, —Ä–µ—Å—É—Ä—Å—ã –º–æ–≥—É—Ç –≥—Ä—É–∑–∏—Ç—å—Å—è; –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ ‚Äî `window.load`. –í —Å–∫—Ä–∏–ø—Ç–∞—Ö —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è `defer` –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞, `async` –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±—ã—Å—Ç—Ä—É—é –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –ø–æ–ª–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `readyState` –∏–ª–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞–π—Ç–µ—Å—å –∫ —Å–æ–±—ã—Ç–∏—è–º, –∏–∑–±–µ–≥–∞—è –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π DOM –¥–æ –µ–≥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏, –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–¥–µ–∂–Ω—É—é —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ª—é–±–æ–º –±—Ä–∞—É–∑–µ—Ä–µ.

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
[^onload-ondomcontentloaded]: [–°—Ç—Ä–∞–Ω–∏—Ü–∞: DOMContentLoaded, load, beforeunload, unload](https://learn.javascript.ru/onload-ondomcontentloaded)
[^script-async-defer]: [–°–∫—Ä–∏–ø—Ç—ã: async, defer](https://learn.javascript.ru/script-async-defer)
[^onload-onerror]: [–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤: onload –∏ onerror](https://learn.javascript.ru/onload-onerror)
