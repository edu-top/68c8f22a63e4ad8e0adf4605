## Встроенные объекты и коллекции

- [Встроенные объекты и коллекции](#встроенные-объекты-и-коллекции)
  - [Объект Date. Работа с датами](#объект-date-работа-с-датами)
    - [Определение дат](#определение-дат)
    - [Получение даты и времени](#получение-даты-и-времени)
    - [Установка даты и времени](#установка-даты-и-времени)
  - [Объект Math. Математические операции](#объект-math-математические-операции)
    - [abs()](#abs)
    - [min() и max()](#min-и-max)
    - [ceil()](#ceil)
    - [floor()](#floor)
    - [round()](#round)
    - [random()](#random)
    - [pow()](#pow)
    - [sqrt()](#sqrt)
    - [log()](#log)
    - [Тригонометрические функции](#тригонометрические-функции)
    - [Константы](#константы)
  - [Объект Number](#объект-number)
    - [Преобразование в другую систему счисления](#преобразование-в-другую-систему-счисления)
    - [Из числа в строку, метод toString](#из-числа-в-строку-метод-tostring)
  - [Источники информации](#источники-информации)

### Объект Date. Работа с датами
Объект **`Date`** позволяет работать с датами и временем в JavaScript.

#### Определение дат
Существуют различные способы создания объекта `Date`:

- С помошью пустого конструктора **`Date`** без параметров. В этом случае созданный объект хранит текущие дату и время

    ```js
    const currentDate = new Date();
    console.log(currentDate);   // Thu Oct 26 2023 13:17:53 GMT+0100
    ```

- В конструктор `Date` передается количества миллисекунд, которые прошли с начала эпохи Unix, то есть с 1 января 1970 года 00:00:00 GMT:

    ```js
    const myDate = new Date(1359270000000);
    console.log(myDate); // Sun Jan 27 2013 11:00:00 GMT+0400 (Москва, стандартное время)
    ```

    <details>
    <summary><em>Об эпохе Unix</em></summary>

    Эпоха Unix связана с началом отсчёта времени в Unix-подобных системах как количество секунд, прошедших с полуночи 1 января 1970 года. Эта дата стала точкой отсчёта для Unix-времени (или Unix-timestamp) и была выбрана, потому что это была ближайшая подходящая дата после создания первой версии операционной системы Unix в начале 1970-х годов.

    **Исторический контекст**: Изначально операционная система Unix была разработана в исследовательском центре Bell Labs в 1970-х годах. Выбор этой даты способствовал созданию единого стандарта времени для разных операционных систем, облегчая синхронизацию и обработку данных. "Unix Epoch" — момент времени — 1 января 1970 года, 00:00:00 UTC — называется «эпохой Unix» и является точкой, от которой ведется отсчет всех последующих секунд в Unix-времени.

    </details>

- В конструктор `Date` передаются день, месяц и год:

    ```js
    const date1 = new Date("27 March 2008");
    console.log(date1); // Thu Mar 27 2008 00:00:00 GMT+0300 (Москва, стандартное время)
    // или так
    const date2 = new Date("3/27/2008");
    console.log(date2); // Thu Mar 27 2008 00:00:00 GMT+0300 (Москва, стандартное время)
    // или так
    const date3 = new Date("3 27 2008");
    console.log(date3); // Thu Mar 27 2008 00:00:00 GMT+0300 (Москва, стандартное время)
    ```

    Если мы используем полное название месяца, то оно пишется в по-английски, если используем сокращенный вариант, тогда используется формат "месяц/день/год" или "месяц день год".

- Четвертый способ состоит в передаче в конструктор `Date` всех параметров даты и времени:

    ```js
    const myDate = new Date(2012,11,25,18,30,20,10);
    console.log(myDate); // Tue Dec 25 2012 18:30:20 GMT+0400 (Москва, стандартное время)
    ```

    В данном случае используются по порядку следующие параметры: `new Date(год, месяц, число, час, минуты, секунды, миллисекунды)`. При этом надо учитывать, что отсчет месяцев начинается с нуля, то есть январь — `0`, а декабрь — `11`.

#### Получение даты и времени
Для получения различных компонентов даты применяется ряд методов:

- `getDate()`: возвращает день месяца

- `getDay()`: возвращает день недели (отсчет начинается с `0` — воскресенье, и последний день — `6` — суббота)

- `getMonth()`: возвращает номер месяца (отсчет начинается с нуля, то есть месяц с номер `0` — январь)

- `getFullYear()`: возвращает год

- `toDateString()`: возвращает полную дату в виде строки

- `getHours()`: возвращает час (от 0 до 23)

- `getMinutes()`: возвращает минуты (от 0 до 59)

- `getSeconds()`: возвращает секунды (от 0 до 59)

- `getMilliseconds()`: возвращает миллисекунды (от 0 до 999)

- `toTimeString()`: возвращает полное время в виде строки

Получим текущую дату:
```js
const today = new Date();
console.log(today.getDate());       // 26
console.log(today.getDay());        // 4
console.log(today.getMonth());      // 9
console.log(today.getFullYear());   // 2023
```

Преобразуем данные в более читабельную форму:
```js
const days = ["Воскресенье", "Понедельник", "Вторник", "Среда", "Четверг", "Пятница", "Суббота"];
const months = ["Январь", "Февраль", "Март", "Апрель", "Май", "Июнь",
            "Июль", "Август", "Сентябрь", "Октябрь", "Ноябрь", "Декабрь"];

const today = new Date();
console.log(`Сегодня: ${today.getDate()} ${months[today.getMonth()]} ${today.getFullYear()}, ${days[today.getDay()]}`);
// Сегодня: 26 Октябрь 2023, Четверг
```

Для перевода из числовых значений в более привычные названия для дней недели и месяцев используются массивы. Получив индекс дня недели (`today.getDay()`) и индекс месяца (`today.getMonth()`) можно получить нужный элемент из массива.

Теперь получим текущее время:
```js
var welcome;
const myDate = new Date();
const hour = myDate.getHours();
const minute = myDate.getMinutes();
const second = myDate.getSeconds();

console.log(`Текущее время: ${hour}:${minute}:${second}`); // Текущее время: 13:38:26
```

#### Установка даты и времени
Кроме задания параметров даты в конструкторе для установки мы также можем использовать дополнительные методы объекта `Date`:

- **`setDate()`**: установка дня в дате

- **`setMonth()`**: уставовка месяца (отсчет начинается с нуля, то есть месяц с номер `0` — январь)

- **`setFullYear()`**: устанавливает год

- **`setHours()`**: установка часа

- **`setMinutes()`**: установка минут

- **`setSeconds()`**: установка секунд

- **`setMilliseconds()`**: установка миллисекунд

Установим дату:
```js
const myDate = new Date();
myDate.setDate(14);
myDate.setMonth(10);    // ноябрь
myDate.setFullYear(2023);
console.log(myDate); // Tue Nov 14 2023 13:41:20 GMT+0300 (Москва, стандартное время)
```

При установке значений мы можем передать величину, большую, чем максимальное допустимое значение. Например, установить для часа число 54:
```js
myDate.setHours(54);
```

В этом случае значение часа будет равно 54 - 24 * 2 = 6, а оставшиеся часы будут составлять два дня (24 * 2), что прибавит к дате два дня. То же самое действует и в отношении дней, минут, секунд, миллисекунд и месяцев.[^5.1]

### Объект Math. Математические операции
Объект **`Math`** предоставляет ряд математических функций, которые можно использовать при вычислениях. Рассмотрим основные математические функции.[^5.2]

#### abs()
Функция `abs()` возвращает абсолютное значение числа:
```js
const x = -25;
console.log(Math.abs(x)); // 25
const y = 34;
console.log(Math.abs(y)); // 34
```

#### min() и max()
Функции `min()` и `max()` возвращают соответственно минимальное и максимальное значение из набора чисел:
```js
const max = Math.max(19, 45); // 45
const min = Math.min(33, 24); // 24
```

Эти функции необязательно должны принимать два числа, в них можно передавать и большее количество чисел:
```js
const max = Math.max(1, 2, 3, -9, 46, -23); // 46
```

#### ceil()
Функция `ceil()` округляет число до следующего наибольшего целого числа:
```js
const x = Math.ceil(9.2); // 10
const y = Math.ceil(-5.9); // -5
```

Выражение `Math.ceil(9.2)` возвращает число 10, так как число 10 следующее наибольшее целое число после 9.2. И также выражение `Math.ceil(-5.9)` возвращает -5, потому что число -5 следующее наибольшее целое после -5.9

#### floor()
Функция `floor()` округляет число до следующего наименьшего целого числа:
```js
const x = Math.floor(9.2); // 9
const y = Math.floor(-5.9); // -6
```

#### round()
Функция `round()` округляет число до следующего наименьшего целого числа, если его десятичная часть меньше 0.5. Если же десятичная часть равна или больше 0.5, то округление идет до ближайшего наибольшего целого числа:
```js
const x = Math.round(5.5); // 6
const y = Math.round(5.4); // 5
const z = Math.round(-5.4); // -5
const n = Math.round(-5.5); // -5
const m = Math.round(-5.6); // -6
console.log(x);
console.log(y);
console.log(z);
console.log(n);
```

#### random()
Функция `random()` возвращает случайное число с плавающей точкой их диапазона от 0 до 1:
```js
const x = Math.random();
```

#### pow()
Функция `pow()` возвращает число в определенной степени. Например, возведем число 2 в степень 3:
```js
const x = Math.pow(2, 3); // 8
```

#### sqrt()
Функция `sqrt()` возвращает квадратный корень числа:
```js
const x = Math.sqrt(121); // 11
const y = Math.sqrt(9); // 3
const z = Math.sqrt(20); // 4.47213595499958
```

#### log()
Функция `log()` возвращает натуральный логарифм числа:
```js
const x = Math.log(1); // 0
const z = Math.log(10); // 2.302585092994046
```

Для вычисления логарифма по произвольному основанию в JavaScript используется формула смены основания:

$$ \log_b{(x)} = \frac{\log_a{(x)}}{\log_a{(b)}} $$

В JavaScript это реализуется как `Math.log(x) / Math.log(base)`, где `Math.log()` вычисляет натуральный логарифм (по основанию $e$).

Например, чтобы вычислить логарифм 100 по основанию 10:
```js
const x = 100;
const base = 10;
const result = Math.log(x) / Math.log(base);
console.log(result); // Выведет: 2
```

Другие полезные методы
- `Math.log()`: Возвращает натуральный логарифм (по основанию $e$).
- `Math.log10()`: Возвращает логарифм по основанию 10 (доступен в некоторых реализациях, таких как Java, но не является частью стандартного объекта `Math` в JavaScript).
- `Math.log2()`: Возвращает логарифм по основанию 2 (также доступен в некоторых реализациях, но не является частью стандартного объекта `Math` в JavaScript). 

#### Тригонометрические функции
Целый ряд функций представляют тригонометрические функции: `sin()` (вычисляет синус угла), `cos()` (вычисляет косинус угла), `tan()` (вычисляет тангенс угла).

```js
const x = Math.sin(90); // 0.8939966636005579
const y = Math.cos(0); // 1
const z = Math.tan(45); // 1.6197751905438615
```

Функция `asin()` вычисляет арксинус числа, `acos` — арккосинус, а `atan()` — арктангенс числа:
```js
const x = Math.asin(0.9); // 1.1197695149986342
const y = Math.acos(1); // 1
const z = Math.atan(1); // 0.7853981633974483
```

#### Константы
Кроме методов объект `Math` также определяет набор встроенных констант, которые можно использовать в различных вычислениях:

- `Math.PI` (число PI): `3.141592653589793`

- `Math.SQRT2` (квадратный корень из двух): `1.4142135623730951`

- `Math.SQRT1_2` (половина от квадратного корня из двух): `0.7071067811865476`

- `Math.E` (число e или число Эйлера): `2.718281828459045`

- `Math.LN2` (натуральный логарифм числа 2): `0.6931471805599453`

- `Math.LN10` (натуральный логарифм числа 10): `2.302585092994046`

- `Math.LOG2E` (двоичный логарифм числа e): `1.4426950408889634`

- `Math.LOG10E` (десятичный логарифм числа e): `0.4342944819032518`

Используем константы в вычислениях:
```js
const x = Math.log(Math.E); // 1
const z = Math.tan(Math.PI/4); // 0.9999999999999999
```

### Объект Number
Объект `Number` представляет числа. Чтобы создать число, надо передать в конструктор `Number` число или строку, представляющую число:
```js
const x = new Number(34);
const y = new Number('34');
console.log(x+y); // 68
```

Определения `x` и `y` в данном случае будут практически аналогичны.[^5.4]

Однако создавать объект `Number` можно и просто присвоив переменной определенное число:
```js
const z = 34;
```

Объект `Number` предоставляет ряд свойств и методов. Некоторые его свойства:

- `Number.MAX_VALUE`: наибольшее возможное целое число. Приблизительно равно 1.79E+308. Числа, которые больше этого значения, рассматриваются как `Infinity`;

- `Number.MIN_VALUE`: наименьшее возможное положительное целое число. Приблизительно равно 5e-324 (где-то около нуля);

- `Number.NaN`: специальное значение, которое указывает, что объект не является числом;

- `Number.NEGATIVE_INFINITY`: значение, которое обозначает отрицательную бесконечность и которое возникает при переполнении. Например, если мы складываем два отрицательных числа, которые по модулю равны `Number.MAX_VALUE`. Например:

    ```js
    const x = -1 * Number.MAX_VALUE
    const y = -1 * Number.MAX_VALUE
    const z = x + y;
    if(z===Number.NEGATIVE_INFINITY)
        console.log("отрицательная бесконечность");
    else
        console.log(z);
    ```

- `Number.POSITIVE_INFINITY`: положительная бесконечность. Также, как и отрицательная бесконечность, возникает при переполнении, только теперь в положительную сторону:

```js
const x = Number.MAX_VALUE
const y = Number.MAX_VALUE
const z = x * y;
if(z===Number.POSITIVE_INFINITY)
    console.log("положительная бесконечность");
else
    console.log(z);
```

Некоторые основные методы:

- `isNaN()`: определяет, является ли объект числом. Если объект не является числом, то возвращается значение `true`:

```js
const a = Number.isNaN(Number.NaN); // true
const b = Number.isNaN(true); // false - new Number(true) = 1
const c = Number.isNaN(null);  // false - new Number(null) = 0
const d = Number.isNaN(25);  // false
const e = Number.isNaN("54"); // false
```

Но следующее выражение вернет `false`, хотя значение не является числом:
```js
const f = Number.isNaN("hello"); // false
```

Чтобы избежать подобных ситуаций, лучше применять глобальную функцию **`isNaN`**:
```js
const f = isNaN("hello"); // true
```

- `parseFloat()`: преобразует строку в число с плавающей точкой. Например:

```js
const a = Number.parseFloat("34.90"); // 34.9
console.log(a);
const b = Number.parseFloat("hello"); // NaN
console.log(b);
const c = Number.parseFloat("34hello"); // 34
console.log(c);
```

- `parseInt()`: преобразует строку в целое число. Например:

```js
const a = Number.parseInt("34.90"); // 34
console.log(a);
const b = Number.parseInt("hello"); // NaN
console.log(b);
const c = Number.parseInt("25hello"); // 25
console.log(c);
```

- `toFixed()`: оставляет в числе с плавающей точкой определенное количество знаков в дробной части. Например:

```js
const a =  10 / 1.44;
console.log("До метода toFixed(): ", a, "<br/>");
a = a.toFixed(2); // оставляем два знака после запятой
console.log("После метода toFixed(): ", a, "<br/>");
```

Вывод браузера:
```
До метода toFixed(): 6.944444444444445
После метода toFixed(): 6.94
```

#### Преобразование в другую систему счисления
Выше мы рассматривали перевод строк в числа в десятичной системе. Но мы можем с помощью второго параметра явно указать, что хотим преобразовать строку в число в определенной системе. Например, преобразование в число в двоичной системе:
```js
const num1 = "110";
const num2 = parseInt(num1, 2);
console.log(num2); // 6
```

Здесь в функцию `parseInt` в качестве второго параметра передается число 2, что указаывает, что первый параметр будет рассматриваться как число в двоичной системе. Результатом будет 6, так как 110 в двоичной системе — это число 6 в десятичной.

#### Из числа в строку, метод toString
Для преобразования числа в строку у него можно вызвать специальный метод `toString()`:
```js
const num = 10;
console.log(num.toString()); // 10
```

Однако в данном случае нет смысла вызывать у числа num метод `toString()`, так как число можно вывести на консоль без всяких преобразований. Тем не менее метод `toString()` может быть полезен — в качестве параметра он принимает основание системы счисления числа и может быть использован для вывода числа в определенной системе счисления:
```js
const num1 = 0b0110;
// выводим число в двоичной системе
console.log(num1.toString(2)); // 110

const num2 = 0xFF;
// выводим число в шестнадцатеричной системе
console.log(num2.toString(16)); // ff
```

### Источники информации
[^5.1]: [Объект Date. Работа с датами](https://metanit.com/web/javascript/5.1.php)
[^5.2]: [Объект Math. Математические операции](https://metanit.com/web/javascript/5.2.php)
[^5.4]: [Объект Number](https://metanit.com/web/javascript/5.4.php)
