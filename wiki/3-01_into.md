<link href="../styles.css" rel="stylesheet" />

## Введение в JavaScript

- [Введение в JavaScript](#введение-в-javascript)
  - [Что такое JavaScript](#что-такое-javascript)
    - [История JavaScript](#история-javascript)
    - [Применение JavaScript](#применение-javascript)
    - [Что может JavaScript в браузере?](#что-может-javascript-в-браузере)
    - [Чего НЕ может JavaScript в браузере?](#чего-не-может-javascript-в-браузере)
    - [Что делает JavaScript особенным?](#что-делает-javascript-особенным)
    - [Языки «над» JavaScript](#языки-над-javascript)
    - [Итого](#итого)
  - [Стандарты, справочники и спецификации](#стандарты-справочники-и-спецификации)
    - [Стандарты](#стандарты)
    - [Спецификация](#спецификация)
    - [Справочники](#справочники)
    - [Таблицы совместимости](#таблицы-совместимости)
  - [Инструментальные средства разработки](#инструментальные-средства-разработки)
    - [Редакторы кода](#редакторы-кода)
      - [IDE](#ide)
      - [«Лёгкие» редакторы](#лёгкие-редакторы)
    - [Выбор среды разработки](#выбор-среды-разработки)
    - [Интерпретаторы](#интерпретаторы)
      - [Консоль разработчика](#консоль-разработчика)
      - [Google Chrome](#google-chrome)
      - [Firefox, Edge и другие](#firefox-edge-и-другие)
      - [Safari](#safari)
    - [Итого](#итого-1)
  - [Первая программа на JavaScript](#первая-программа-на-javascript)
    - [Подготовка](#подготовка)
    - [Создание страницы](#создание-страницы)
    - [Тег «script»](#тег-script)
    - [Современная разметка](#современная-разметка)
      - [Атрибут type](#атрибут-type)
      - [Атрибут language](#атрибут-language)
      - [Обёртывание скрипта в HTML-комментарии.](#обёртывание-скрипта-в-html-комментарии)
    - [Внешние скрипты](#внешние-скрипты)
    - [Запуск программы](#запуск-программы)
    - [Итого](#итого-2)
    - [Задачи](#задачи)
      - [Вызвать alert](#вызвать-alert)
      - [Покажите сообщение с помощью внешнего скрипта](#покажите-сообщение-с-помощью-внешнего-скрипта)
  - [Структура кода](#структура-кода)
    - [Инструкции](#инструкции)
    - [Точка с запятой](#точка-с-запятой)
    - [Комментарии](#комментарии)
  - [Источники информации](#источники-информации)

Давайте посмотрим, что такого особенного в JavaScript, чего можно достичь с его помощью и какие другие технологии хорошо с ним работают.

### Что такое JavaScript
Изначально *JavaScript* был создан, чтобы «*сделать веб-страницы живыми*».

Сегодняшний мир веб-сайтов трудно представить без языка JavaScript. JavaScript — это то, что делает живыми веб-страницы, которые мы каждый день просматриваем в своем веб-браузере.[^1-1]

Программы на этом языке называются <dfn title="скрипт">скриптами</dfn> или <dfn title="сценарий">сценариями</dfn> (*scripts*). Они могут встраиваться в HTML и выполняться автоматически при загрузке веб-страницы.

Скрипты распространяются и выполняются, как простой текст. Им не нужна специальная подготовка или компиляция для запуска.

Это отличает JavaScript от другого языка с похожим названием – [Java](https://ru.wikipedia.org/wiki/Java).

!!! info "Почему JavaScript?"
    Когда JavaScript создавался, у него было другое имя – «LiveScript». Однако, язык Java был очень популярен в то время, и было решено, что позиционирование JavaScript как «младшего брата» Java будет полезно.

    Со временем JavaScript стал полностью независимым языком со своей собственной спецификацией, называющейся [ECMAScript](https://ru.wikipedia.org/wiki/ECMAScript), и сейчас не имеет никакого отношения к Java.

Таким образом, JavaScript является интерпретируемым языком. Это значит, что код на языке JavaScript выполняется с помощью интерпретатора. Интерпретатор получает инструкции языка JavaScript, которые определены на веб-странице, выполняет их (или интерпретирует).

Сегодня JavaScript может выполняться не только в браузере, но и на сервере или на любом другом устройстве, которое имеет специальную программу, называющуюся [«движком» JavaScript](https://ru.wikipedia.org/wiki/%D0%94%D0%B2%D0%B8%D0%B6%D0%BE%D0%BA_JavaScript).

У браузера есть собственный движок, который иногда называют «виртуальная машина JavaScript».

Разные движки имеют разные «кодовые имена». Например:

- [V8](https://ru.wikipedia.org/wiki/V8_(%D0%B4%D0%B2%D0%B8%D0%B6%D0%BE%D0%BA_JavaScript)) – в Chrome, Opera и Edge.
- [SpiderMonkey](https://ru.wikipedia.org/wiki/SpiderMonkey) – в Firefox.
…Ещё есть «Chakra» для IE, «JavaScriptCore», «Nitro» и «SquirrelFish» для Safari и т.д.

Эти названия полезно знать, так как они часто используются в статьях для разработчиков. Мы тоже будем их использовать. Например, если «функциональность X поддерживается V8», тогда «Х», скорее всего, работает в Chrome, Opera и Edge.

!!! info "Как работают движки?"

    Движки сложны. Но основы понять легко.

    1. Движок (встроенный, если это браузер) читает («парсит») текст скрипта.
    2. Затем он преобразует («компилирует») скрипт в машинный язык.
    3. После этого машинный код запускается и работает достаточно быстро.

    Движок применяет оптимизации на каждом этапе. Он даже просматривает скомпилированный скрипт во время его работы, анализируя проходящие через него данные, и применяет оптимизации к машинному коду, полагаясь на полученные знания. В результате скрипты работают очень быстро.

#### История JavaScript
Сегодняшний мир веб-сайтов трудно представить без языка JavaScript. JavaScript — это то, что делает живыми веб-страницы, которые мы каждый день просматриваем в своем веб-браузере.

JavaScript был создан в 1995 году в компании Netscape разработчиком Брендоном Айком (Brendon Eich) в качестве языка сценариев в браузере Netscape Navigator 2. Первоначально язык назывался LiveScript, но на волне популярности в тот момент другого языка Java LiveScript был переименован в JavaScript. Однако данный момент до сих пор иногда приводит к некоторой путанице: некоторые начинающие разработчики считают, что Java и JavaScript чуть ли не один и тот же язык. Нет, это абсолютно два разных языка, и они связаны только по названию.[^1-1]

#### Применение JavaScript

Первоначально JavaScript обладал довольно небольшими возможностями. Его цель состояла лишь в том, чтобы добавить немного поведения на веб-страницу. Например, обработать нажатие кнопок на веб-странице, произвести какие-нибудь другие действия, связанные прежде всего с элементами управления.

Однако развитие веб-среды, появление HTML5 и технологии Node.js открыло перед JavaScript гораздо большие горизонты. Сейчас JavaScript продолжает использоваться прежде всего для создания веб-приложений на стороне клиента, только теперь он предоставляет гораздо больше возможностей.

Также он применяется как язык серверной стороны. То есть если раньше JavaScript применялся только на веб-странице, а на стороне сервера нам надо было использовать такие технологии, как PHP, ASP.NET, Ruby, Java, то сейчас благодаря Node.js мы можем обрабатывать все запросы к серверу также с помощью JavaScript.

Также JavaScript может применяться для создания десктопных приложений, например, благодаря таким фреймворкам как Electron.

В последнее время переживает бум сфера мобильной разработки. И JavaScript опять же не остается в стороне: увеличение мощности устройств и повсеместное распространение стандарта HTML5 привело к тому, что для создания приложений для смартфонов, планшетов и настольных компьютеров мы также можем использовать JavaScript. То есть JavaScript уже перешагнул границы веб-браузера, которые ему были очерчены при его создании.

Также javascript может использоваться для разработки программ для встроенных устройство, в частности, для направления IoT(Internet of Things или Интернет вещей). То есть JavaScript можно использовать для программирования самых различных "умных" устройств, которые взаимодействуют с интернетом.

Таким образом, вы можете встретить применение JavaScript практически повсюду. Сегодня это действительно один из самых популярных языков программирования, и его популярность еще будет расти.[^1-1]

#### Что может JavaScript в браузере?
Современный JavaScript – это «безопасный» язык программирования. Он не предоставляет низкоуровневый доступ к памяти или процессору, потому что изначально был создан для браузеров, не требующих этого.

Возможности JavaScript сильно зависят от окружения, в котором он работает. Например, [Node.js](https://ru.wikipedia.org/wiki/Node.js) поддерживает функции чтения/записи произвольных файлов, выполнения сетевых запросов и т.д.

В браузере для JavaScript доступно всё, что связано с манипулированием веб-страницами, взаимодействием с пользователем и веб-сервером.

Например, в браузере JavaScript может:

- Добавлять новый HTML-код на страницу, изменять существующее содержимое, модифицировать стили.
- Реагировать на действия пользователя, щелчки мыши, перемещения указателя, нажатия клавиш.
- Отправлять сетевые запросы на удалённые сервера, скачивать и загружать файлы (технологии [AJAX](https://ru.wikipedia.org/wiki/AJAX) и [COMET](https://ru.wikipedia.org/wiki/Comet_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5))).
- Получать и устанавливать куки, задавать вопросы посетителю, показывать сообщения.
- Запоминать данные на стороне клиента («local storage»).

#### Чего НЕ может JavaScript в браузере?
*[HTTP]: HyperText Transfer Protocol

Возможности JavaScript в браузере ограничены ради безопасности пользователя. Цель заключается в предотвращении доступа недобросовестной веб-страницы к личной информации или нанесения ущерба данным пользователя.

Примеры таких ограничений включают в себя:

- JavaScript на веб-странице не может читать/записывать произвольные файлы на жёстком диске, копировать их или запускать программы. Он не имеет прямого доступа к системным функциям ОС.

- Современные браузеры позволяют ему работать с файлами, но с ограниченным доступом, и предоставляют его, только если пользователь выполняет определённые действия, такие как «перетаскивание» файла в окно браузера или его выбор с помощью тега `<input>`.

- Существуют способы взаимодействия с камерой/микрофоном и другими устройствами, но они требуют явного разрешения пользователя. Таким образом, страница с поддержкой JavaScript не может незаметно включить веб-камеру, наблюдать за происходящим и отправлять информацию в какую-нибудь службу безопасности.

- Различные окна/вкладки не знают друг о друге. Иногда одно окно, используя JavaScript, открывает другое окно. Но даже в этом случае JavaScript с одной страницы не имеет доступа к другой, если они пришли с разных сайтов (с другого домена, протокола или порта).

    Это называется «Политика одинакового источника» (*Same Origin Policy*). Чтобы обойти это ограничение, обе страницы должны согласиться с этим и содержать JavaScript-код, который специальным образом обменивается данными.

    Это ограничение необходимо, опять же, для безопасности пользователя. Страница https://anysite.com, которую открыл пользователь, не должна иметь доступ к другой вкладке браузера с URL https://gmail.com и воровать информацию оттуда.

- JavaScript может легко взаимодействовать с сервером, с которого пришла текущая страница. Но его способность получать данные с других сайтов/доменов ограничена. Хотя это возможно в принципе, для чего требуется явное согласие (выраженное в заголовках HTTP) с удалённой стороной. Опять же, это ограничение безопасности.

<figure>

![Limitations](../svg/limitations.svg)

</figure>

Подобные ограничения не действуют, если JavaScript используется вне браузера, например — на сервере. Современные браузеры предоставляют плагины/расширения, с помощью которых можно запрашивать дополнительные разрешения.

#### Что делает JavaScript особенным?
Как минимум, три сильные стороны JavaScript:

- Полная интеграция с HTML/CSS.
- Простые вещи делаются просто.
- Поддерживается всеми основными браузерами и включён по умолчанию.

JavaScript – это единственная браузерная технология, сочетающая в себе все эти три вещи.

Вот что делает JavaScript особенным. Вот почему это самый распространённый инструмент для создания интерфейсов в браузере.

Хотя, конечно, JavaScript позволяет делать приложения не только в браузерах, но и на сервере, на мобильных устройствах и т.п.

#### Языки «над» JavaScript
Синтаксис JavaScript подходит не под все нужды. Разные люди хотят иметь разные возможности.

Это естественно, потому что проекты разные и требования к ним тоже разные.

Так, в последнее время появилось много новых языков, которые *транспилируются* (конвертируются) в JavaScript, прежде чем запустятся в браузере.

Современные инструменты делают транспиляцию очень быстрой и прозрачной, фактически позволяя разработчикам писать код на другом языке, автоматически преобразуя его в JavaScript «под капотом».

Примеры таких языков:

- [CoffeeScript](https://coffeescript.org/) добавляет «синтаксический сахар» для JavaScript. Он вводит более короткий синтаксис, который позволяет писать чистый и лаконичный код. Обычно такое нравится Ruby-программистам.
- [TypeScript](https://www.typescriptlang.org/) концентрируется на добавлении «строгой типизации» для упрощения разработки и поддержки больших и сложных систем. Разработан Microsoft.
- [Flow](https://flow.org/) тоже добавляет типизацию, но иначе. Разработан Facebook.
- [Dart](https://www.dartlang.org/) стоит особняком, потому что имеет собственный движок, работающий вне браузера (например, в мобильных приложениях). Первоначально был предложен Google, как замена JavaScript, но на данный момент необходима его транспиляция для запуска так же, как для вышеперечисленных языков.
- [Brython](https://brython.info/) транспилирует Python в JavaScript, что позволяет писать приложения на чистом Python без JavaScript.

Есть и другие. Но даже если мы используем один из этих языков, мы должны знать JavaScript, чтобы действительно понимать, что мы делаем.[^intro]

#### Итого
- JavaScript изначально создавался только для браузера, но сейчас используется на многих других платформах.
- Сегодня JavaScript занимает уникальную позицию в качестве самого распространённого языка для браузера, обладающего полной интеграцией с HTML/CSS.
- Многие языки могут быть «транспилированы» в JavaScript для предоставления дополнительных функций. Рекомендуется хотя бы кратко рассмотреть их после освоения JavaScript.

### Стандарты, справочники и спецификации

#### Стандарты
*[ECMA]: European Computers Manufactures Association

С самого начала существовало несколько веб-браузеров (Netscape, Internet Explorer), которые предоставляли различные реализации языка. И чтобы свести различные реализации к общему стержню и стандартизировать язык под руководством организации ECMA (European Computers Manufactures Association — Европейская Ассоциация Производителей Компьютеров) был разработан стандарт ECMAScript. В принципе сами термины JavaScript и ECMAScript являются во многом взаимозаменяемыми и относятся к одному и тому же языку.

К настоящему времени ECMA было разработано несколько стандартов языка, которые отражают его развитие. В последнее время почти каждый год выходит новый стандарт. На данный момент последним принятым стандартом является ECMAScript 2023, который был издан в июне 2023 года. В последние годы новые стандарты выпускаются почти каждый год, понемногу добавляя новые возможности к языку. Однако реализация стандартов в браузерах занимает довольно продолжительное время. Одни браузеры быстрее реализуют новые стандарты, другие медленнее. Кроме того, есть большой пласт старых версий браузеров, которыми простые пользователи продолжают пользоваться и которые естественно могут не поддерживать нововведения последних стандартов. И это надо учитывать при разработке программ на JavaScript. В данном же руководстве будут рассматриваться в основном те возможности JavaScript, которые поддерживаются всеми наиболее распространенными современными браузерами.

#### Спецификация
[Спецификация ECMA-262](https://www.ecma-international.org/publications-and-standards/standards/ecma-262/) содержит самую глубокую, детальную и формализованную информацию о JavaScript. Она определяет сам язык.

Вначале спецификация может показаться тяжеловатой для понимания из-за слишком формального стиля изложения. Если вы ищете источник самой достоверной информации, то это правильное место, но она не для ежедневного использования.

Новая версия спецификации появляется каждый год. А пока она не вышла официально, все желающие могут ознакомиться с текущим черновиком на https://tc39.es/ecma262/.

Чтобы почитать о самых последних возможностях, включая те, которые «почти в стандарте» (так называемые «stage 3 proposals»), посетите https://github.com/tc39/proposals.

Если вы разрабатываете под браузеры, то существуют и другие спецификации, посвященные специальным браузерными функциям.

#### Справочники
**MDN (Mozilla) JavaScript Reference** – это справочник с примерами и другой информацией. Хороший источник для получения подробных сведений о функциях языка, методах встроенных объектов и так далее.

Располагается по адресу https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference.

Хотя зачастую вместо их сайта удобнее использовать какой-нибудь интернет-поисковик, вводя там запрос «MDN [что вы хотите найти]», например https://google.com/search?q=MDN+parseInt для поиска информации о функции `parseInt`.

#### Таблицы совместимости
JavaScript – это развивающийся язык, в который постоянно добавляется что-то новое.

Посмотреть, какие возможности поддерживаются в разных браузерах и других движках, можно в следующих источниках:

- https://caniuse.com – таблицы с информацией о поддержке по каждой возможности языка. Например, чтобы узнать, какие движки поддерживают современные криптографические функции, посетите: https://caniuse.com/#feat=cryptography.
- https://kangax.github.io/compat-table – таблица с возможностями языка и движками, которые их поддерживают и не поддерживают.

Все эти ресурсы полезны в ежедневной работе программиста, так как они содержат ценную информацию о возможностях использования языка, их поддержке и так далее.

Пожалуйста, запомните эти ссылки (или ссылку на эту страницу) на случай, когда вам понадобится подробная информация о какой-нибудь конкретной возможности JavaScript.[^manuals-specifications]

### Инструментальные средства разработки
Для разработки на JavaScript потребуется текстовый редактор для написания кода на данном языке программирования, а для выполнения программы и проверки результатов — интерпретатор JavaScript, который встроен во все современные веб-браузеры, а также составляющий основу в серверной среды разработки Node.js.

#### Редакторы кода
*[IDE]: Integrated Development Environment
Большую часть своего рабочего времени программисты проводят в редакторах кода.

Есть два основных типа редакторов: IDE и «лёгкие» редакторы. Многие используют по одному инструменту каждого типа.

##### IDE
Термином [IDE](https://ru.wikipedia.org/wiki/Integrated_development_environment) (Integrated Development Environment, «интегрированная среда разработки») называют мощные редакторы с множеством функций, которые работают в рамках целого проекта. Как видно из названия, это не просто редактор, а нечто большее.

IDE загружает проект (который может состоять из множества файлов), позволяет переключаться между файлами, предлагает автодополнение по коду всего проекта (а не только открытого файла), также она интегрирована с системой контроля версий (например, такой как [git](https://git-scm.com/)), средой для тестирования и другими инструментами на уровне всего проекта.

Если вы ещё не выбрали себе IDE, присмотритесь к этим:

- [Visual Studio Code](https://code.visualstudio.com/) (кросс-платформенная, бесплатная).
- [WebStorm](https://www.jetbrains.com/webstorm/) (кросс-платформенная, бесплатная для некоммерческого использования).

В качестве текстового редактора обычно советуют использовать **[Visual Studio Code](https://code.visualstudio.com/download)**. Он бесплатен, имеет много возможностей, в частности, поддерживает подцветку синтаксиса JavaScript и является кроссплатформенным: может быть установлен как на Windows, так и на Linux и MacOS. Хотя этот может быть любой другой текстовый редактор.

Для Windows есть ещё **Visual Studio** (не путать с Visual Studio Code). Visual Studio – это платная мощная среда разработки, которая работает только на Windows. Она хорошо подходит для .NET платформы. У неё есть бесплатная версия, которая называется [Visual Studio Community](https://www.visualstudio.com/vs/community/).

Многие IDE платные, но у них есть пробный период (как у **WebStorm**). Их цена обычно незначительна по сравнению с зарплатой квалифицированного разработчика, так что пробуйте и выбирайте ту, что вам подходит лучше других.

##### «Лёгкие» редакторы
«Лёгкие» редакторы менее мощные, чем IDE, но они отличаются скоростью, удобным интерфейсом и простотой.

В основном их используют для того, чтобы быстро открыть и отредактировать нужный файл.

Главное отличие между «лёгким» редактором и IDE состоит в том, что IDE работает на уровне целого проекта, поэтому она загружает больше данных при запуске, анализирует структуру проекта, если это необходимо, и так далее. Если вы работаете только с одним файлом, то гораздо быстрее открыть его в «лёгком» редакторе.

На практике «лёгкие» редакторы могут иметь множество плагинов, включая автодополнение и анализаторы синтаксиса на уровне директории, поэтому границы между IDE и «лёгкими» редакторами размыты.

Следующие варианты заслуживают вашего внимания:

- [Sublime Text](https://www.sublimetext.com/) (кроссплатформенный, условно-бесплатный).
- [Notepad++](https://notepad-plus-plus.org/) (Windows, бесплатный).
- [Vim](https://www.vim.org/) и [Emacs](https://www.gnu.org/software/emacs/) тоже хороши, если знать, как ими пользоваться.

#### Выбор среды разработки
Редакторы, перечисленные выше, известны разработчикам давно и заслужили много хороших отзывов от профессионалов. Конечно же, есть много других отличных редакторов. Существуют различные среды разработки, которые поддерживают JavaScript и облегчают разработку на этом языке, например, Visual Studio, WebStorm, Netbeans и так далее, которые могут упростить какие-то моменты создания программ на JavaScript. При желании можно использовать эти среды разработки.

Выбирайте тот, который вам больше нравится. Выбор редактора, как и любого другого инструмента, индивидуален и зависит от ваших проектов, привычек и личных предпочтений.[^code-editors] Однако в общем случае достаточно текствого редактора и веб-браузера, а в простых случаях даже достаточно одного браузера.

#### Интерпретаторы
Для проверки выполнения программы нам потребуется также интерпретатор JavaScript, который можем выполнять программы JavaScript. В качестве интерпретатора мы будем использовать стандартный веб-браузер. Можно использовать последние версии любых распространенных браузеров — Google Chrome, Microsoft Edge, Mozilla Firefox, Opera, Safari.

##### Консоль разработчика
Код уязвим для ошибок. И вы, скорее всего, будете делать ошибки в коде… Впрочем, давайте будем откровенны: вы *точно* будете совершать ошибки в коде. В конце концов, вы человек, а не робот.

Но по умолчанию в браузере ошибки не видны. То есть, если что-то пойдёт не так, мы не увидим, что именно сломалось, и не сможем это починить.

Для решения задач такого рода в браузер встроены так называемые «Инструменты разработки» (**Developer tools** или сокращённо — **devtools**).

Chrome и Firefox снискали любовь подавляющего большинства программистов во многом благодаря своим отменным инструментам разработчика. Остальные браузеры, хотя и оснащены подобными инструментами, но всё же зачастую находятся в роли догоняющих и по качеству, и по количеству свойств и особенностей. В общем, почти у всех программистов есть свой «любимый» браузер. Другие используются только для отлова и исправления специфичных «браузерозависимых» ошибок.

Для начала знакомства с этими мощными инструментами давайте выясним, как их открывать, смотреть ошибки и запускать команды JavaScript.

##### Google Chrome
Откройте страницу [bug.html](../samples/01_intro/bug.html).

В её JavaScript-коде закралась ошибка. Она не видна обычному посетителю, поэтому давайте найдём её при помощи инструментов разработки.

Нажмите <kbd>F12</kbd> или, если вы используете Mac, <kbd>Cmd</kbd>+<kbd>Opt</kbd>+<kbd>J</kbd>.

По умолчанию в инструментах разработчика откроется вкладка Console (консоль).

Она выглядит приблизительно следующим образом:

![Bug](../img/page-bug.png)

Точный внешний вид инструментов разработки зависит от используемой версии Chrome. Время от времени некоторые детали изменяются, но в целом внешний вид остаётся примерно похожим на предыдущие версии.

- В консоли мы можем увидеть сообщение об ошибке, отрисованное красным цветом. В нашем случае скрипт содержит неизвестную команду «lalala».
- Справа присутствует ссылка на исходный код `bug.html:12` с номером строки кода, в которой эта ошибка и произошла.

Под сообщением об ошибке находится синий символ `>`. Он обозначает командную строку, в ней мы можем редактировать и запускать JavaScript-команды. Для их запуска нажмите <kbd>⏎ Enter</kbd>.

!!! info "Многострочный ввод"
    Обычно при нажатии <kbd>⏎ Enter</kbd> введённая строка кода сразу выполняется.

    Чтобы перенести строку, нажмите <kbd>⇧ Shift</kbd>+<kbd>⏎ Enter</kbd>. Так можно вводить более длинный JS-код.

Теперь мы явно видим ошибки, для начала этого вполне достаточно. Мы ещё вернёмся к инструментам разработчика позже и более подробно рассмотрим отладку кода в главе [Отладка в браузере](https://learn.javascript.ru/debugging-chrome).

##### Firefox, Edge и другие
Инструменты разработчика в большинстве браузеров открываются при нажатии на <kbd>F12</kbd>.

Их внешний вид и принципы работы мало чем отличаются. Разобравшись с инструментами в одном браузере, вы без труда сможете работать с ними и в другом.

##### Safari
Safari (браузер для Mac, не поддерживается в системах Windows/Linux) всё же имеет небольшое отличие. Для начала работы нам нужно включить «Меню разработки» («Developer menu»).

Откройте Настройки (Preferences) и перейдите к панели «Продвинутые» (Advanced). В самом низу вы найдёте чекбокс:

![Safari](../img/safari@2x.png)

Теперь консоль можно активировать нажатием клавиш <kbd>Cmd</kbd>+<kbd>Opt</kbd>+<kbd>C</kbd>. Также обратите внимание на новый элемент меню «Разработка» («Develop»). В нем содержится большое количество команд и настроек.

#### Итого
- Инструменты разработчика позволяют нам смотреть ошибки, выполнять команды, проверять значение переменных и ещё много всего полезного.
- В большинстве браузеров, работающих под Windows, инструменты разработчика можно открыть, нажав <kbd>F12</kbd>. В Chrome для Mac используйте комбинацию <kbd>Cmd</kbd>+<kbd>Opt</kbd>+<kbd>J</kbd>, Safari: <kbd>Cmd</kbd>+<kbd>Opt</kbd>+<kbd>C</kbd> (необходимо предварительное включение «Меню разработчика»).

Теперь наше окружение полностью настроено. В следующем разделе мы перейдём непосредственно к JavaScript.[^devtools]

### Первая программа на JavaScript
Итак, приступим к созданию первой программы. В этой части мы изучим собственно JavaScript, сам язык.

#### Подготовка

Создадим первую программу на javascript. Для написания и тестирования программ на JavaScript нам потребуются две вещи: текстовый редактор и веб-браузер.

В качестве текстового редактора можно взять любой, который нравится — Atom, Sublime Text, Visual Studio Code, Notepad++ и другие. В данном руководстве будем ориентироваться на бесплатный и многофункциональный текстовый редактор [Visual Studio Code](https://code.visualstudio.com/download), поскольку он является наиболее популярным.

Кроме того, нам потребуется рабочая среда для запуска наших скриптов, и браузер будет хорошим выбором. В качестве браузера также можно взять последние версии любого предпочтительного веб-браузера. В настоящем руководстве будем преимущественно ориентироваться на Google Chrome.

В данном разделе мы сократим количество специфичных для браузера команд (например, `alert`) до минимума, чтобы вы не тратили на них время, если планируете сосредоточиться на другой среде (например, Node.js). А на использовании JavaScript в браузере мы сосредоточимся в следующих частях.

Итак, сначала давайте посмотрим, как выполнить скрипт на странице. Для серверных сред (например, Node.js), вы можете выполнить скрипт с помощью команды типа "node my.js". Для браузера всё немного иначе.[^hello-world]

#### Создание страницы

Для начала определим для нашего приложения какой-нибудь каталог. Например, создадим на диске *C* папку *app*. В этой папке создадим файл под названием *index.html*. То есть данный файл будет представлять веб-страницу с кодом HTML.

![Первый скрипт на JavaScript](../img/1.12.png)

Откроем этот файл в текстовом редакторе и определим в файле следующий код:
```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>DevPM</title>
</head>
<body>
    <script>
        document.write("<h2>Первая программа на JavaScript</h2>");
    </script>
</body>
</html>
```

Здесь мы определяем стандартные элементы `html`. В элементе `head` определяется кодировка utf-8 и заголовок (элемент `title`). В элементе `body` определяется тело веб-страницы, которое в данном случае состоит только из одного элемента `<script>`.

#### Тег «script»
Программы на JavaScript могут быть вставлены в любое место HTML-документа с помощью тега `<script>`.

Для примера:
```html
<!DOCTYPE HTML>
<html>

<body>

  <p>Перед скриптом...</p>

  <script>
    alert( 'Привет, мир!' );
  </script>

  <p>...После скрипта.</p>

</body>

</html>
```

Итак, подключение кода javascript на html-страницу осуществляется с помощью тега `<script>`. Данный тег следует размещать либо в заголовке (между тегами `<head>` и `</head>`), либо в теле веб-странице (между тегами `<body>` и `</body>`). Нередко подключение скриптов происходит перед закрывающим тегом `</body>` для оптимизации загрузки веб-страницы.

Тег `<script>` содержит JavaScript-код, который автоматически выполнится, когда браузер его обработает.

#### Современная разметка
Тег `<script>` имеет несколько атрибутов, которые редко используются, но всё ещё могут встретиться в старом коде:

##### Атрибут type

Раньше надо было в теге `<script>` указывать тип скрипта, так как данный тег может использоваться не только для подключения инструкций javascript, но и для других целей. Так, даже сейчас вы можете встретить на некоторых веб-страницах такое определение элемента `script`:
```html
<script type="text/javascript">
```

Старый стандарт HTML, HTML4, требовал наличия этого атрибута в теге `<script>`. Обычно он имел значение `type="text/javascript"`. На текущий момент этого больше не требуется, поэтому в настоящее время предпочтительнее опускать атрибут `type`, так как браузеры по умолчанию считают, что элемент `script` содержит инструкции `javascript`.

Более того, в современном стандарте HTML смысл этого атрибута полностью изменился. Теперь он может использоваться для JavaScript-модулей. Но это тема не для начального уровня, и о ней мы поговорим в другой части, касающейся модулей.

##### Атрибут language
Этот атрибут должен был задавать язык, на котором написан скрипт (`<script language="javascript">`). Но так как JavaScript является языком по умолчанию, в этом атрибуте уже нет необходимости.

##### Обёртывание скрипта в HTML-комментарии.
В очень древних книгах и руководствах вы сможете найти комментарии внутри тега `<script>`, например, такие:
```js
<script type="text/javascript"><!--
    ...
//--></script>
```

Этот комментарий скрывал код JavaScript в старых браузерах, которые не знали, как обрабатывать тег `<script>`. Поскольку все браузеры, выпущенные за последние 15 лет, не содержат данной проблемы, такие комментарии уже не нужны. Если они есть, то это признак, что перед нами очень древний код.

#### Внешние скрипты
Если у вас много JavaScript-кода, вы можете поместить его в отдельный файл.

Файл скрипта можно подключить к HTML с помощью атрибута `src`:
```html
<script src="/path/to/script.js"></script>
```

Здесь `/path/to/script.js` – это абсолютный путь от корневой папки до необходимого файла. Корневой папкой может быть корень диска или корень сайта, в зависимости от условий работы сайта. Также можно указать относительный путь от текущей страницы. Например, `src="script.js"` или `src="./script.js"` будет означать, что файл "script.js" находится в текущей папке.

Можно указать и полный URL-адрес. Например:
```html
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.2.0/lodash.js"></script>
```

Для подключения нескольких скриптов используйте несколько тегов:
```html
<script src="/js/script1.js"></script>
<script src="/js/script2.js"></script>
…
```

!!! info "На заметку:"
    Как правило, только простейшие скрипты помещаются в HTML. Более сложные выделяются в отдельные файлы.

    Польза отдельных файлов в том, что браузер загрузит скрипт отдельно и сможет хранить его в [кеше](https://en.wikipedia.org/wiki/Web_cache).

    Другие страницы, которые подключают тот же скрипт, смогут брать его из кеша вместо повторной загрузки из сети. И таким образом файл будет загружаться с сервера только один раз.

    Это сокращает расход трафика и ускоряет загрузку страниц.

!!! warning "Если атрибут `src` установлен, содержимое тега `script` будет игнорироваться."
    В одном теге `<script>` нельзя использовать одновременно атрибут `src` и код внутри.

    Нижеприведённый пример не работает:
    ```html
    <script src="file.js">
    alert(1); // содержимое игнорируется, так как есть атрибут src
    </script>
    ```

    Нужно выбрать: либо внешний скрипт `<script src="…">`, либо обычный код внутри тега `<script>`.

    Вышеприведённый пример можно разделить на два скрипта:
    ```html
    <script src="file.js"></script>
    <script>
    alert(1);
    </script>
    ```

#### Запуск программы

Используемый нами выше код javascript содержит одно выражение:
```js
document.write("<h2>Первая программа на JavaScript</h2>");
```

Код javascript может содержать множество инструкций и каждая инструкция завершается точкой с запятой. Наша инструкция вызывает метод `document.write()`, который выводит на веб-страницу некоторое содержимое, в данном случае это заголовок `<h2>Первая программа на JavaScript</h2>`.

Вид файла в текстовом редакторе Visual Studio Code:

![Первая программа на JavaScript в Visual Studio Code](../img/1.2.png)

Теперь, когда веб-страница готова, откроем ее в веб-браузере.

![Первая программа на JavaScript](../img/1.1.png)

И веб-браузер отобразит заголовок, который мы передали в метод `document.write()` в коде javascript.[^1.2]

#### Итого
- Для добавления кода JavaScript на страницу используется тег `<script>`
- Атрибуты `type` и `language` необязательны.
- Скрипт во внешнем файле можно вставить с помощью `<script src="path/to/script.js"></script>`.

Нам ещё многое предстоит изучить про браузерные скрипты и их взаимодействие со страницей. Но, как уже было сказано, эта часть учебника посвящена именно языку JavaScript, поэтому здесь мы постараемся не отвлекаться на детали реализации в браузере. Мы воспользуемся браузером для запуска JavaScript, это удобно для онлайн-демонстраций, но это только одна из платформ, на которых работает этот язык.[^hello-world]

#### Задачи

##### Вызвать alert

Создайте страницу, которая отобразит сообщение «Я JavaScript!».

Выполните это задание в песочнице, либо на вашем жёстком диске, где – неважно, главное – проверьте, что она работает.

<details>
<summary>Решение</summary>

```html
<!DOCTYPE html>
<html>
<body>

  <script>
    alert( "Я JavaScript!" );
  </script>

</body>
</html>
```

</details>

##### Покажите сообщение с помощью внешнего скрипта

Возьмите решение предыдущей задачи Вызвать `alert`, и измените его. Извлеките содержимое скрипта во внешний файл *alert.js*, лежащий в той же папке.

Откройте страницу, убедитесь, что оповещение работает.[^hello-world]


<details>
<summary>Решение</summary>

HTML-код:
```html
<!DOCTYPE html>
<html>

<body>

  <script src="alert.js"></script>

</body>

</html>
```

Для файла *alert.js* в той же папке:
```js
alert("Я JavaScript!");
```

</details>

### Структура кода
Начнём изучение языка с рассмотрения основных «строительных блоков» кода.[^structure]

#### Инструкции
<dfn title="инструкция">Инструкции</dfn> (*statement*) – это синтаксические конструкции и команды, которые выполняют действия.

Мы уже видели инструкцию `alert('Привет, мир!')`, которая отображает сообщение «Привет, мир!».

В нашем коде может быть столько инструкций, сколько мы захотим. Инструкции могут отделяться точкой с запятой.

Например, здесь мы разделили сообщение «Привет Мир» на два вызова `alert`:
```js
alert('Привет'); alert('Мир');
```

Обычно каждую инструкцию пишут на новой строке, чтобы код было легче читать:
```js
alert('Привет');
alert('Мир');
```

#### Точка с запятой
В большинстве случаев точку с запятой можно не ставить, если есть переход на новую строку.

Так тоже будет работать:
```js
alert('Привет')
alert('Мир')
```

В этом случае JavaScript интерпретирует перенос строки как «неявную» точку с запятой. Это называется [автоматическая вставка точки с запятой](https://tc39.github.io/ecma262/#sec-automatic-semicolon-insertion).

**В большинстве случаев новая строка подразумевает точку с запятой. Но «в большинстве случаев» не значит «всегда»!**

В некоторых ситуациях новая строка всё же не означает точку с запятой. Например:
```js
alert(3 +
1
+ 2);
```

Код выведет `6`, потому что JavaScript не вставляет здесь точку с запятой. Интуитивно очевидно, что, если строка заканчивается знаком "+", значит, это «незавершённое выражение», поэтому точка с запятой не требуется. И в этом случае всё работает, как задумано.

**Но есть ситуации, где JavaScript «забывает» вставить точку с запятой там, где она нужна.**

Ошибки, которые при этом появляются, достаточно сложно обнаруживать и исправлять.

!!! info "Пример ошибки"
    Если вы хотите увидеть конкретный пример такой ошибки, обратите внимание на этот код:
    ```js
    alert('Hello');

    [1, 2].forEach(alert);
    ```

    Пока нет необходимости знать значение скобок `[]` и `forEach`. Мы изучим их позже. Пока что просто запомните результат выполнения этого кода: выводится `Hello`, затем `1`, затем `2`.

    А теперь давайте уберем точку с запятой после `alert`:
    ```js
    alert('Hello')

    [1, 2].forEach(alert);
    ```

    Этот код отличается от кода, приведенного выше, только в одном: пропала точка с запятой в конце первой строки.

    Если мы запустим этот код, выведется только первый `alert`, а затем мы получим ошибку (вам может потребоваться открыть консоль, чтобы увидеть её)!

    Это потому что JavaScript не вставляет точку с запятой перед квадратными скобками `[...]`. И поэтому код в последнем примере выполняется, как одна инструкция.

    Вот как движок видит его:
    ```js
    alert('Hello')[1, 2].forEach(alert);
    ```

    Выглядит странно, правда? Такое слияние в данном случае неправильное. Мы должны поставить точку с запятой после `alert`, чтобы код работал правильно.

    Это может произойти и в некоторых других ситуациях.

Мы рекомендуем ставить точку с запятой между инструкциями, даже если они отделены переносами строк. Это правило широко используется в сообществе разработчиков. Стоит отметить ещё раз – в большинстве случаев можно не ставить точку с запятой. Но безопаснее, особенно для новичка, ставить её.

#### Комментарии
Со временем программы становятся всё сложнее и сложнее. Возникает необходимость добавлять *комментарии*, которые бы описывали, что делает код и почему.

Комментарии могут находиться в любом месте скрипта. Они не влияют на его выполнение, поскольку движок просто игнорирует их.

**Однострочные комментарии начинаются с двойной косой черты `//`.**

Часть строки после `//` считается комментарием. Такой комментарий может как занимать строку целиком, так и находиться после инструкции.

Как здесь:
```js
// Этот комментарий занимает всю строку
alert('Привет');

alert('Мир'); // Этот комментарий следует за инструкцией
```

**Многострочные комментарии начинаются косой чертой со звёздочкой `/*` и заканчиваются звёздочкой с косой чертой `*/`.**

Как вот здесь:
```js
/* Пример с двумя сообщениями.
Это - многострочный комментарий.
*/
alert('Привет');
alert('Мир');
```

Содержимое комментария игнорируется, поэтому, если мы поместим код внутри `/* … */`, он не будет исполняться.

Это бывает удобно для временного отключения участка кода:
```js
/* Закомментировали код
alert('Привет');
*/
alert('Мир');
```

!!! info "Используйте горячие клавиши!"
    В большинстве редакторов строку кода можно закомментировать, нажав комбинацию клавиш <kbd>Ctrl</kbd>+<kbd>/</kbd> для однострочного комментария и что-то вроде <kbd>Ctrl</kbd>+<kbd>⇧ Shift</kbd>+<kbd>/</kbd> – для многострочных комментариев (выделите кусок кода и нажмите комбинацию клавиш). В системе Mac попробуйте <kbd>Cmd</kbd> вместо <kbd>Ctrl</kbd> и <kbd>Option</kbd> вместо <kbd>⇧ Shift</kbd>.

!!! warning "Вложенные комментарии не поддерживаются!"
    Не может быть `/*...*/` внутри `/*...*/`.

    Такой код «умрёт» с ошибкой:
    ```js
    /*
      /* вложенный комментарий ?!? */
    */
    alert( 'Мир' );
    ```

Не стесняйтесь использовать комментарии в своём коде.

Комментарии увеличивают размер кода, но это не проблема. Есть множество инструментов, которые минифицируют код перед публикацией на рабочий сервер. Они убирают комментарии, так что они не содержатся в рабочих скриптах. Таким образом, комментарии никоим образом не вредят рабочему коду.

Как лучше писать комментарии, будет изложено в разделе, посвященном качеству кода.

### Источники информации
[^intro]: [Введение в JavaScript](https://learn.javascript.ru/intro)
[^manuals-specifications]: [Справочники и спецификации](https://learn.javascript.ru/manuals-specifications)
[^code-editors]: [Редакторы кода](https://learn.javascript.ru/code-editors)
[^devtools]: [Консоль разработчика](https://learn.javascript.ru/devtools)
[^hello-world]: [Привет, мир!](https://learn.javascript.ru/hello-world)
[^structure]: [Структура кода](https://learn.javascript.ru/structure)
[^1-1]: [Введение в JavaScript](https://metanit.com/web/javascript/1.1.php)
[^1.2]: [Первая программа на JavaScript](https://metanit.com/web/javascript/1.2.php)
